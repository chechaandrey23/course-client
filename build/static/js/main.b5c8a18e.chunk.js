(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{461:function(e,t){},463:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(43),s=a.n(c),i=a(25),o=(a(305),a(306),a(6)),d=a(478),l=a(10),u=a(27),j=a(491),b=a(288),m=a(479),O=a(480),h=a(495);function g(e){return(e=Array.isArray(e)?e:[e]).includes(1)}function x(e){return(e=Array.isArray(e)?e:[e]).includes(2)}function p(e){return(e=Array.isArray(e)?e:[e]).includes(3)}var f=a(7),v=a.n(f),w=a(2),y=a(4),I=a(207),L=a.n(I);function R(e){return e=e||{},new Promise((function(t,a){L()(e).then((function(e){t(e)})).catch((function(r){r.response&&401===r.response.status&&e.JWTRefreshUpdate?L()({method:e.JWTRefreshUpdateMethod||"GET",url:e.JWTRefreshUpdateURL}).then((function(r){L()(e).then((function(e){t(e)})).catch((function(e){a(T(e))}))})).catch((function(e){a(T(e))})):a(T(r))}))}))}function T(e){return e.response?(e.response.data||(e.response.data=e),e.response):e.request?(e.request.data||(e.request.data=e),e.request):(e.data||(e.data=e),e)}var N={responseType:"json",JWTRefreshUpdate:!0,JWTRefreshUpdateMethod:"POST",JWTRefreshUpdateURL:"/auth/api/refresh"};function C(e){return Object.keys(e||{}).reduce((function(t,a){var r;return t[a]=(r=e[a],function(e){return{type:r,payload:e}}),t}),{})}function k(e){return(Array.isArray(e)?e:[]).reduce((function(e,t){return"function"===typeof t?e.push(t):Array.isArray(t)&&"function"===typeof t[1]&&e.push({pattern:t[0]+"",saga:t[1]}),e}),[])}var E=a(30),S=Object(E.b)({name:"userUser",initialState:{login:!1,loadLogin:!1,errorLogin:!1,logout:!1,loadLogout:!1,errorLogout:!1,registration:!1,loadRegistration:!1,errorRegistration:!1,user:{},loadGetUser:!1,loadSetUser:!1,errorSetUser:!1},reducers:{login:function(e,t){e.login=t.payload},startLoadLogin:function(e,t){e.loadLogin=!0},endLoadLogin:function(e,t){e.loadLogin=!1},errorLogin:function(e,t){e.errorLogin=t.payload},logout:function(e,t){e.logout=t.payload},startLoadLogout:function(e,t){e.loadLogout=!0},endLoadLogout:function(e,t){e.loadLogout=!1},errorLogout:function(e,t){e.errorLogout=t.payload},registration:function(e,t){e.registration=t.payload},startLoadRegistration:function(e,t){e.loadRegistration=!0},endLoadRegistration:function(e,t){e.loadRegistration=!1},errorRegistration:function(e,t){e.errorRegistration=t.payload},user:function(e,t){e.user=Object(w.a)({},t.payload)},userInfo:function(e,t){var a=Object(w.a)({},e.user);a.userInfo=t.payload,e.user=a},startLoadGetUser:function(e,t){e.loadGetUser=!0},endLoadGetUser:function(e,t){e.loadGetUser=!1},startLoadSetUser:function(e,t){e.loadSetUser=!0},endLoadSetUser:function(e,t){e.loadSetUser=!1},errorSetUser:function(e,t){e.errorSetUser=t.payload}}}),G=S.actions,_=G.login,U=G.startLoadLogin,F=G.endLoadLogin,A=G.errorLogin,M=G.logout,H=G.startLoadLogout,P=G.endLoadLogout,B=(G.errorLogout,G.registration),W=G.startLoadRegistration,q=G.endLoadRegistration,V=G.errorRegistration,z=G.userInfo,D=G.user,K=G.startLoadGetUser,J=G.endLoadGetUser,Q=G.startLoadSetUser,X=G.endLoadSetUser,Y=G.errorSetUser,Z=S.reducer,$=Object(E.b)({name:"userLikes",initialState:{likes:0,like:null,loadNewLike:!1},reducers:{setCountLikes:function(e,t){e.likes=1*t.payload},newLike:function(e,t){e.like=t.payload,e.likes=e.likes+1},startLoadNewLike:function(e,t){e.loadNewLike=!0},endLoadNewLike:function(e,t){e.loadNewLike=!1},errorNewLike:function(e,t){e.errorNewLike=t.payload}}}),ee=$.actions,te=ee.setCountLikes,ae=ee.newLike,re=ee.startLoadNewLike,ne=ee.endLoadNewLike,ce=ee.errorNewLike,se=$.reducer,ie=v.a.mark(je),oe=v.a.mark(be),de=v.a.mark(me),le=v.a.mark(Oe),ue=v.a.mark(he);function je(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,a=void 0===t?{}:t,r.prev=1,r.next=4,Object(y.d)(U());case 4:return r.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/auth/api/login",data:{username:a.user,password:a.password}},N));case 6:return r.sent,r.next=9,Object(y.d)(_(!0));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,Object(y.d)(A(r.t0));case 15:return r.prev=15,r.next=18,Object(y.d)(F());case 18:return r.finish(15);case 19:case"end":return r.stop()}}),ie,null,[[1,11,15,19]])}function be(e){var t;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,void 0===t?{}:t,a.next=3,Object(y.d)(H());case 3:return a.next=5,Object(y.b)(R,Object(w.a)({method:"post",url:"/auth/api/logout"},N));case 5:return a.sent,a.next=8,Object(y.d)(M(!0));case 8:return a.next=10,Object(y.d)(P());case 10:case"end":return a.stop()}}),oe)}function me(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,a=void 0===t?{}:t,r.prev=1,r.next=4,Object(y.d)(W());case 4:return r.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/auth/api/registration",data:{username:a.user,password:a.password,password2:a.password2,email:a.email,first_name:a.first_name,last_name:a.last_name}},N));case 6:return r.sent,r.next=9,Object(y.d)(B(!0));case 9:r.next=16;break;case 11:return r.prev=11,r.t0=r.catch(1),delete r.t0.config,r.next=16,Object(y.d)(V(r.t0));case 16:return r.prev=16,r.next=19,Object(y.d)(q());case 19:return r.finish(16);case 20:case"end":return r.stop()}}),de,null,[[1,11,16,20]])}function Oe(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.d)(K());case 2:return t.next=4,Object(y.b)(R,Object(w.a)({method:"get",url:"/user/user"},N));case 4:return e=t.sent,t.next=7,Object(y.d)(te(e.data.countUserLike));case 7:return t.next=9,Object(y.d)(D(e.data));case 9:return t.next=11,Object(y.d)(J());case 11:case"end":return t.stop()}}),le)}function he(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(Q());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/user/user-settings",data:{id:a.id,first_name:a.first_name,last_name:a.last_name,langId:a.langId,themeId:a.themeId}},N));case 6:return r=n.sent,n.next=9,Object(y.d)(z(r.data));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(1),n.next=15,Object(y.d)(Y(n.t0));case 15:return n.prev=15,n.next=18,Object(y.d)(X());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),ue,null,[[1,11,15,19]])}var ge="FETCH_LOGIN",xe="FETCH_LOGOUT",pe="FETCH_REGISTRATION",fe="FETCH_GET_USER",ve="FETCH_SET_USER",we=k([[ge,je],[xe,be],[pe,me],[fe,Oe],[ve,he]]),ye=C({sagaLogin:ge,sagaLogout:xe,sagaRegistration:pe,sagaGetUser:fe,sagaSetUser:ve}),Ie=ye.sagaLogin,Le=ye.sagaLogout,Re=ye.sagaRegistration,Te=ye.sagaSetUser,Ne=ye.sagaGetUser,Ce=a(1);function ke(){var e,t,a=Object(h.a)(),n=Object(l.a)(a,3),c=n[0],s=n[2],f=Object(i.f)(),v=(Object(i.e)(),Object(o.b)()),w=Object(o.c)((function(e){return e.userUser.logout})),y=Object(o.c)((function(e){return e.userUser.user})),I=Object(o.c)((function(e){return e.userLikes.likes})),L=Object(r.useCallback)((function(){v(Le())}),[]);Object(r.useEffect)((function(){w&&(f("/"),v(M()),s("Roles"))}),[w]),Object(r.useEffect)((function(){(p(c.Roles)||x(c.Roles)||g(c.Roles))&&v(Ne())}),[]);var R="".concat((null===(e=y.userInfo)||void 0===e?void 0:e.first_name)+""," ").concat((null===(t=y.userInfo)||void 0===t?void 0:t.last_name)+"");return R.length>15&&(R=R.substring(0,15)+"..."),Object(Ce.jsx)(j.a,{bg:"light",variant:"light",expand:"lg",className:"border border-primary rounded",children:Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(j.a.Brand,{href:"/",children:"What to play? look? read?"}),Object(Ce.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(Ce.jsxs)(j.a.Collapse,{id:"basic-navbar-nav",children:[Object(Ce.jsxs)(b.a,{className:"me-auto",children:[Object(Ce.jsx)(b.a.Item,{children:Object(Ce.jsx)(u.b,{className:"nav-link",to:"/reviews",children:"Reviews"})}),x(c.Roles)?Object(Ce.jsx)(b.a.Item,{children:Object(Ce.jsx)(u.b,{className:"nav-link",to:"/my-reviews",children:"MyReviews"})}):Object(Ce.jsx)(Ce.Fragment,{})]}),Object(Ce.jsxs)(b.a,{children:[p(c.Roles)?Object(Ce.jsx)(b.a.Item,{children:Object(Ce.jsx)(b.a.Link,{href:"/admin",children:"ADMIN-PANEL"})}):Object(Ce.jsx)(Ce.Fragment,{}),p(c.Roles)||x(c.Roles)||g(c.Roles)?Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(b.a.Item,{children:Object(Ce.jsxs)(u.b,{className:"nav-link",to:"/user",children:["[",R,"]",Object(Ce.jsxs)(m.a,{bg:"success",children:[I," Likes"]})]})}),Object(Ce.jsx)(b.a.Item,{children:Object(Ce.jsx)(O.a,{variant:"outline-danger",onClick:L,children:"LogOut"})})]}):Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(b.a.Item,{children:Object(Ce.jsx)(u.b,{className:"nav-link",to:"/registration",children:"Registration"})}),Object(Ce.jsx)(b.a.Item,{children:Object(Ce.jsx)(u.b,{className:"nav-link",to:"/login",children:"Login"})})]})]})]})]})})}var Ee=a(481),Se=a(268),Ge=a(482),_e=a(490),Ue=a(494),Fe=a(37),Ae=a(71),Me=a(26),He=Me.d().shape({user:Me.f().required("Username is required").min(4,"Username must be at least 4 characters").max(20,"Username must not exceed 20 characters"),password:Me.f().required("Password is required").min(6,"Password must be at least 6 characters").max(40,"Password must not exceed 40 characters")});function Pe(e){Object(Ue.a)().t;var t,a,n=Object(i.f)(),c=Object(o.b)(),s=Object(o.c)((function(e){return e.userUser.errorLogin})),l=Object(o.c)((function(e){return e.userUser.login}));Object(r.useEffect)((function(){l&&(n("/user"),c(_(!1)))}),[l]);var u=Object(Fe.e)({resolver:Object(Ae.a)(He)}),j=u.register,b=u.handleSubmit,m=(u.watch,u.formState.errors);return Object(Ce.jsxs)(d.a,{className:"border border-primary rounded bg-light mt-1 mb-1",children:[Object(Ce.jsx)(Ee.a,{className:"mt-2",children:Object(Ce.jsx)(Se.a,{children:s?Object(Ce.jsxs)(Ge.a,{variant:"danger",onClose:function(){c(A(!1))},dismissible:!0,children:[Object(Ce.jsx)(Ge.a.Heading,{children:"Server Error Message"}),Object(Ce.jsx)("p",{children:s.data.message||s.data.reason})]}):null})}),Object(Ce.jsx)(Ee.a,{className:"justify-content-center",children:Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)("h4",{children:"Authorization"})})}),Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsxs)(_e.a,{onSubmit:b((function(e){c(Ie(e))})),children:[Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicUsername",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"User login"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},j("user")),{},{type:"text",placeholder:"Enter login",isInvalid:!!m.user})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(t=m.user)||void 0===t?void 0:t.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicPassword",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Password"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},j("password")),{},{type:"password",placeholder:"Password",isInvalid:!!m.password})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(a=m.password)||void 0===a?void 0:a.message})]})]}),Object(Ce.jsx)(Ee.a,{className:"justify-content-end",children:Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-primary",type:"submit",children:"LogIn"})})})]})})}),Object(Ce.jsx)(Ee.a,{className:"border-top border-primary mt-2 mb-2"}),Object(Ce.jsxs)(Ee.a,{className:"mb-2 justify-content-center",children:[Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)("a",{href:"/auth/api/github",class:"btn btn-outline-success",role:"button","aria-pressed":"true",children:"logIn with GitHub"})}),Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)("a",{href:"/auth/api/facebook",class:"btn btn-outline-primary",role:"button","aria-pressed":"true",children:"logIn with FaceBook"})}),Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)("a",{href:"/auth/api/google",class:"btn btn-outline-warning",role:"button","aria-pressed":"true",children:"logIn with Google"})})]})]})}var Be=a(85),We=a.n(Be),qe=a(219),Ve=a.n(qe);function ze(){var e,t=Object(i.f)(),a=Object(Fe.e)(),r=a.register,n=a.handleSubmit,c=(a.setValue,a.control,a.reset,a.formState.errors),s=Object(i.g)();return Object(Ce.jsx)(d.a,{className:"border border-primary rounded bg-light mt-1",children:Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{className:"mt-3 mb-3",children:Object(Ce.jsx)(_e.a,{onSubmit:n((function(e){t("/search/"+Ve()(e.search))})),children:Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,children:[Object(Ce.jsxs)(Se.a,{children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},r("search")),{},{defaultValue:s.query,type:"text",placeholder:"Search",isInvalid:!!c.search})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(e=c.search)||void 0===e?void 0:e.message})]}),Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-primary",type:"submit",children:"Search"})})]})})})})})}function De(){return Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(ze,{}),Object(Ce.jsx)(Pe,{})]})}var Ke=Me.d().shape({user:Me.f().required("Username is required").min(4,"Username must be at least 4 characters").max(20,"Username must not exceed 20 characters"),password:Me.f().required("Password is required").min(6,"Password must be at least 6 characters").max(40,"Password must not exceed 40 characters"),password2:Me.f().required("Password2 is required").min(6,"Password2 must be at least 6 characters").max(40,"Password2 must not exceed 40 characters").oneOf([Me.e("password"),null],"Passwords must match"),email:Me.f().required("Email is required").min(6,"Email must be at least 6 characters").max(40,"Email must not exceed 40 characters").email("Invalid Email"),first_name:Me.f(),last_name:Me.f()});function Je(e){Object(Ue.a)().t;var t,a,n,c,s,l,u=Object(i.f)(),j=Object(o.b)(),b=Object(o.c)((function(e){return e.userUser.errorRegistration})),m=Object(o.c)((function(e){return e.userUser.registration})),h=Object(Fe.e)({resolver:Object(Ae.a)(Ke)}),g=h.register,x=h.handleSubmit,p=(h.watch,h.formState.errors);return Object(r.useEffect)((function(){m&&(u("/user"),j(B(!1)))}),[m]),Object(Ce.jsxs)(d.a,{className:"border border-primary rounded bg-light mt-1 mb-1",children:[Object(Ce.jsx)(Ee.a,{className:"mt-2",children:Object(Ce.jsx)(Se.a,{children:b?Object(Ce.jsxs)(Ge.a,{variant:"danger",onClose:function(){j(V(!1))},dismissible:!0,children:[Object(Ce.jsx)(Ge.a.Heading,{children:"Server Error Message"}),Object(Ce.jsx)("p",{children:b.data.reason})]}):null})}),Object(Ce.jsx)(Ee.a,{className:"justify-content-center",children:Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)("h4",{children:"Registration"})})}),Object(Ce.jsx)(Ee.a,{className:"mb-2",children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsxs)(_e.a,{onSubmit:x((function(e){j(Re(e))})),children:[Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicFullName",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Password"}),Object(Ce.jsxs)(Se.a,{sm:"5",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},g("first_name")),{},{type:"text",placeholder:"First name",isInvalid:!!p.first_name})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(t=p.first_name)||void 0===t?void 0:t.message})]}),Object(Ce.jsxs)(Se.a,{sm:"5",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},g("last_name")),{},{type:"text",placeholder:"Last name",isInvalid:!!p.last_name})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(a=p.last_name)||void 0===a?void 0:a.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicUsername",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"User login"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},g("user")),{},{type:"text",placeholder:"Enter login",isInvalid:!!p.user})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(n=p.user)||void 0===n?void 0:n.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicEmail",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Email"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},g("email")),{},{type:"email",placeholder:"email@email",isInvalid:!!p.email})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(c=p.email)||void 0===c?void 0:c.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicPassword",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Password"}),Object(Ce.jsxs)(Se.a,{sm:"5",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},g("password")),{},{type:"password",placeholder:"Password",isInvalid:!!p.password})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(s=p.password)||void 0===s?void 0:s.message})]}),Object(Ce.jsxs)(Se.a,{sm:"5",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},g("password2")),{},{type:"password",placeholder:"Password 2",isInvalid:!!p.password2})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(l=p.password2)||void 0===l?void 0:l.message})]})]}),Object(Ce.jsx)(Ee.a,{className:"justify-content-center",children:Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-primary",type:"submit",children:"Registration"})})})]})})})]})}function Qe(){return Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(ze,{}),Object(Ce.jsx)(Je,{})]})}var Xe=a(5),Ye=a(483);function Ze(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var a,r=t.current.parentNode,n=window.getComputedStyle(r),c=n.position;r.style.position="relative";var s=parseInt(n.width)-(e.ignorePadding?0:parseInt(n.paddingRight)+parseInt(n.paddingLeft))+"px",i=parseInt(n.height)-(e.ignorePadding?0:parseInt(n.paddingTop)+parseInt(n.paddingBottom))+"px",o=e.ignorePadding?"0px":n.paddingLeft,d=e.ignorePadding?"0px":n.paddingTop,l=document.createElement("div");l.style.position="absolute",l.style.display="block",l.style.width=s,l.style.height=i,l.style.left=o,l.style.top=d,r.appendChild(l),l.style.zIndex=10,l.style.opacity="0.2",l.style.backgroundColor="orange",(a=l.classList).add.apply(a,Object(Xe.a)(e.className?e.className.split(" "):[]));var u=t.current;return u.style.position="absolute",u.style.display="block",u.style.width=s,u.style.height=i,u.style.left=o,u.style.top=d,u.style.zIndex=11,function(){r.style.position=c,r.removeChild(l),u.style.display="none"}})),Object(Ce.jsx)("div",{ref:t,style:{display:"none"},className:e.className?e.className.toString():"",children:Object(Ce.jsx)(Ee.a,{style:{height:"100%"},className:"justify-content-center align-items-center",children:Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)(Ye.a,{animation:"border",style:{width:e.size||"auto",height:e.size||"auto"},variant:e.variant||"warning"})})})})}var $e=Object(E.b)({name:"userLangs",initialState:{langs:[],loadLangs:!1},reducers:{getLangs:function(e,t){e.langs=Object(Xe.a)(t.payload)},startLoadLangs:function(e,t){e.loadLangs=!0},endLoadLangs:function(e,t){e.loadLangs=!1}}}),et=$e.actions,tt=et.getLangs,at=et.startLoadLangs,rt=et.endLoadLangs,nt=$e.reducer,ct=v.a.mark(st);function st(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,void 0===t?{}:t,r.next=3,Object(y.d)(at());case 3:return r.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/user/langs"},N));case 5:return a=r.sent,r.next=8,Object(y.d)(tt(a.data));case 8:return r.next=10,Object(y.d)(rt());case 10:case"end":return r.stop()}}),ct)}var it="FETCH_GET_ALL_LANGS",ot=k([[it,st]]),dt=C({sagaGetAllLangs:it}).sagaGetAllLangs,lt=Object(E.b)({name:"userThemes",initialState:{themes:[],loadThemes:!1},reducers:{getThemes:function(e,t){e.themes=Object(Xe.a)(t.payload)},startLoadThemes:function(e,t){e.loadThemes=!0},endLoadThemes:function(e,t){e.loadThemes=!1}}}),ut=lt.actions,jt=ut.getThemes,bt=ut.startLoadThemes,mt=ut.endLoadThemes,Ot=lt.reducer,ht=v.a.mark(gt);function gt(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,void 0===t?{}:t,r.next=3,Object(y.d)(bt());case 3:return r.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/user/themes"},N));case 5:return a=r.sent,r.next=8,Object(y.d)(jt(a.data));case 8:return r.next=10,Object(y.d)(mt());case 10:case"end":return r.stop()}}),ht)}var xt="FETCH_GET_ALL_THEMES",pt=k([[xt,gt]]),ft=C({sagaGetAllThemes:xt}).sagaGetAllThemes,vt=Me.d().shape({first_name:Me.f(),last_name:Me.f(),langId:Me.c().required("lang ID is required"),themeId:Me.c().required("Theme ID is required")});function wt(e){Object(Ue.a)().t;var t,a,n,c,s=Object(r.useState)(!0),i=Object(l.a)(s,2),u=i[0],j=i[1],b=Object(o.b)(),m=Object(o.c)((function(e){return e.userUser.user})),h=Object(o.c)((function(e){return e.userUser.loadGetUser})),g=Object(o.c)((function(e){return e.userUser.errorSetUser})),x=Object(o.c)((function(e){return e.userUser.loadSetUser})),p=Object(o.c)((function(e){return e.userLangs.langs})),f=Object(o.c)((function(e){return e.userLangs.loadLangs})),v=Object(o.c)((function(e){return e.userThemes.themes})),y=Object(o.c)((function(e){return e.userThemes.loadThemes})),I=Object(Fe.e)({resolver:Object(Ae.a)(vt)}),L=I.register,R=I.handleSubmit,T=(I.watch,I.formState.errors);return Object(r.useLayoutEffect)((function(){b(dt()),b(ft()),j(!1)}),[]),Object(Ce.jsxs)(d.a,{className:"border border-primary rounded bg-light mt-1 mb-1",children:[h||!m.userInfo?Object(Ce.jsx)(Ze,{ignorePadding:!0,className:"rounded",size:"3.5rem"}):null,x?Object(Ce.jsx)(Ze,{ignorePadding:!0,className:"rounded",size:"5rem"}):null,Object(Ce.jsx)(Ee.a,{className:"mt-2",children:Object(Ce.jsx)(Se.a,{children:g?Object(Ce.jsxs)(Ge.a,{variant:"danger",onClose:function(){b(Y(!1))},dismissible:!0,children:[Object(Ce.jsx)(Ge.a.Heading,{children:"Server Error Message"}),Object(Ce.jsx)("p",{children:g.data.reason||g.data.message})]}):null})}),Object(Ce.jsx)(Ee.a,{className:"justify-content-center",children:Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)("h4",{children:"User Settings"})})}),Object(Ce.jsx)(Ee.a,{className:"mb-2",children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsxs)(_e.a,{onSubmit:R((function(e){var t;b(Te(Object(w.a)({id:null===(t=m.userInfo)||void 0===t?void 0:t.id},e)))})),children:[Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicFirstName",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"First name"}),Object(Ce.jsxs)(Se.a,{sm:"7",children:[u||h||!m.userInfo?null:Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},L("first_name")),{},{defaultValue:m.userInfo.first_name,type:"text",placeholder:"Enter first name",isInvalid:!!T.first_name})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(t=T.first_name)||void 0===t?void 0:t.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicLastName",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Last name"}),Object(Ce.jsxs)(Se.a,{sm:"7",children:[u||h||!m.userInfo?null:Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},L("last_name")),{},{defaultValue:m.userInfo.last_name,type:"text",placeholder:"Enter last name",isInvalid:!!T.last_name})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(a=T.last_name)||void 0===a?void 0:a.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicLang",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Language"}),Object(Ce.jsxs)(Se.a,{sm:"7",children:[f?Object(Ce.jsx)(Ze,{size:"1.25rem"}):null,u||f||!m.userInfo?null:Object(Ce.jsx)(_e.a.Select,Object(w.a)(Object(w.a)({},L("langId")),{},{defaultValue:m.userInfo.langId,isInvalid:!!T.lang,children:p.map((function(e,t){return Object(Ce.jsx)("option",{value:e.id,children:e.title},t)}))})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(n=T.lang)||void 0===n?void 0:n.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicTheme",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Theme"}),Object(Ce.jsxs)(Se.a,{sm:"7",children:[y?Object(Ce.jsx)(Ze,{size:"1.25rem"}):null,u||y||!m.userInfo?null:Object(Ce.jsx)(_e.a.Select,Object(w.a)(Object(w.a)({},L("themeId")),{},{defaultValue:m.userInfo.themeId,isInvalid:!!T.theme,children:v.map((function(e,t){return Object(Ce.jsx)("option",{value:e.id,children:e.title},t)}))})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(c=T.theme)||void 0===c?void 0:c.message})]})]}),Object(Ce.jsx)(Ee.a,{className:"justify-content-center",children:Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-primary",type:"submit",children:"Save"})})})]})})})]})}function yt(){return Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(ze,{}),Object(Ce.jsx)(wt,{})]})}function It(e){return Object(Ce.jsxs)(Ee.a,{children:[Object(Ce.jsxs)(Se.a,{style:{paddingRight:".125rem"},children:[e.content,e.addContent?e.addContent:null]}),Object(Ce.jsx)(Se.a,{md:"auto",style:{paddingLeft:".125rem"},children:e.rightbar})]})}var Lt=a(45),Rt=a(269),Tt=Object(E.b)({name:"userRatings",initialState:{rating:0,loadNewRating:!1},reducers:{setRating:function(e,t){e.rating=1*t.payload},newRating:function(e,t){e.rating=t.payload.userRating},startLoadNewRating:function(e,t){e.loadNewRating=!0},endLoadNewRating:function(e,t){e.loadNewRating=!1},errorNewRating:function(e,t){e.errorNewRating=t.payload}}}),Nt=Tt.actions,Ct=(Nt.setRating,Nt.newRating),kt=Nt.startLoadNewRating,Et=Nt.endLoadNewRating,St=Nt.errorNewRating,Gt=Tt.reducer,_t=v.a.mark(Ut);function Ut(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(kt());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/user/rating-new",data:{rating:a.rating,reviewId:a.reviewId}},N));case 6:return r=n.sent,n.next=9,Object(y.d)(Ct(r.data));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(1),n.next=15,Object(y.d)(St(n.t0));case 15:return n.prev=15,n.next=18,Object(y.d)(Et());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),_t,null,[[1,11,15,19]])}var Ft="FETCH_NEW_RATING",At=k([[Ft,Ut]]),Mt=C({sagaNewRating:Ft}).sagaNewRating;function Ht(e){Object(Ue.a)().t;var t=Object(o.b)(),a=Object(r.useState)(null),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(o.c)((function(e){return e.userRatings.rating})),d=Object(o.c)((function(e){return e.userRatings.loadNewRating})),u=Object(r.useRef)(!1);Object(r.useLayoutEffect)((function(){!j.current&&u.current&&(s(i),u.current=!1)}),[i]);var j=Object(r.useRef)(!0);Object(r.useLayoutEffect)((function(){j.current&&(j.current=!1)}));var b=e.data.length>0?e.data[0].userRating:null!==c?c:0,m=e.data.length>0||null!==c;return Object(Ce.jsxs)(Ce.Fragment,{children:[d&&u.current?Object(Ce.jsx)(Ze,{size:"1.5rem"}):null,Object(Ce.jsx)(Rt.a,{readonly:m,initialRating:b,onChange:function(a){u.current=!0,t(Mt({rating:a,reviewId:e.reviewId}))}})]})}var Pt=v.a.mark(Bt);function Bt(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(re());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/user/like-new",data:{reviewId:a.reviewId}},N));case 6:return r=n.sent,n.next=9,Object(y.d)(ae(r.data));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(1),n.next=15,Object(y.d)(ce(n.t0));case 15:return n.prev=15,n.next=18,Object(y.d)(ne());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),Pt,null,[[1,11,15,19]])}var Wt="FETCH_NEW_LIKE",qt=k([[Wt,Bt]]),Vt=C({sagaNewLike:Wt}).sagaNewLike;function zt(e){Object(Ue.a)().t;var t=Object(o.b)(),a=Object(r.useState)(null),n=Object(l.a)(a,2),c=n[0],s=n[1],i=Object(o.c)((function(e){return e.userLikes.like})),d=Object(o.c)((function(e){return e.userLikes.loadNewLike})),u=Object(r.useRef)(!1);Object(r.useLayoutEffect)((function(){!j.current&&u.current&&(s(i.like),u.current=!1)}),[i]);var j=Object(r.useRef)(!0);Object(r.useLayoutEffect)((function(){j.current&&(j.current=!1)}));var b=e.data.length>0||null!==c;return Object(Ce.jsxs)(Ce.Fragment,{children:[d&&u.current?Object(Ce.jsx)(Ze,{size:"1.5rem"}):null,Object(Ce.jsx)(O.a,{variant:"danger",disabled:b,size:"sm",onClick:function(){u.current=!0,t(Vt({reviewId:e.reviewId}))},children:"Like"})]})}function Dt(e){var t=Object(Ue.a)().t,a=Object(h.a)(),r=Object(l.a)(a,3),n=r[0];r[2];return Object(Ce.jsxs)(d.a,{className:"border border-primary rounded bg-light mt-1 mb-1",children:[Object(Ce.jsxs)(Ee.a,{className:"align-items-center mt-1 mb-1",children:[Object(Ce.jsxs)(Se.a,{children:[Object(Ce.jsx)("span",{className:"h6",children:e.group}),Object(Ce.jsx)("span",{children:" / "}),Object(Ce.jsx)(u.b,{to:"/review/"+e.id,children:Object(Ce.jsx)("span",{className:"h6",children:e.title})})]}),Object(Ce.jsx)(Se.a,{md:"auto",children:g(n.Roles)?Object(Ce.jsx)(Ht,{data:e.ratings,reviewId:e.id}):null}),Object(Ce.jsx)(Se.a,{md:"auto",children:g(n.Roles)?Object(Ce.jsx)(zt,{data:e.likes,reviewId:e.id}):null})]}),Object(Ce.jsxs)(Ee.a,{children:[Object(Ce.jsx)(Se.a,{sm:"3",children:Object(Ce.jsxs)(Ee.a,{className:"float-start border border-primary rounded row-cols-1 text-center",style:{marginRight:"5px"},children:[Object(Ce.jsx)(Se.a,{className:"text-info",children:Object(Ce.jsx)("h1",{children:e.authorRating})}),Object(Ce.jsx)(Se.a,{children:Object(Ce.jsxs)("span",{className:"text-secondary",children:[e.author[0]," ",e.author[1]]})})]})}),Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)(Lt.a,{children:e.description})})]}),Object(Ce.jsxs)(Ee.a,{className:"align-items-center mt-1 mb-1",children:[Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("span",{className:"text-secondary",children:t("intlDateTime",{val:new Date(e.date)})})}),Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)(u.b,{to:"/review/"+e.id,children:Object(Ce.jsx)("span",{className:"h6",children:"full review"})})})]})]})}var Kt=a(65),Jt=a(492),Qt=a(289),Xt=a(131),Yt=a(291),Zt=a(286);function $t(e){return e.filter(ea)}function ea(e,t,a){return a.lastIndexOf(e)===t}var ta=Object(E.b)({name:"editorTags",initialState:{tags:[],loadTags:!1,loadNewTag:!1,errorNewTag:!1,newTag:!1},reducers:{getTags:function(e,t){e.tags=Object(Xe.a)(t.payload)},startLoadTags:function(e,t){e.loadTags=!0},endLoadTags:function(e,t){e.loadTags=!1},startLoadNewTag:function(e,t){e.loadNewTag=!0},endLoadNewTag:function(e,t){e.loadNewTag=!1},errorNewTag:function(e,t){e.errorNewTag=t.payload},newTag:function(e,t){e.tags=[t.payload].concat(Object(Xe.a)(e.tags)),e.newTag=t.payload}}}),aa=ta.actions,ra=aa.getTags,na=aa.startLoadTags,ca=aa.endLoadTags,sa=aa.startLoadNewTag,ia=aa.endLoadNewTag,oa=aa.errorNewTag,da=aa.newTag,la=ta.reducer,ua=v.a.mark(ba),ja=v.a.mark(ma);function ba(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(na());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/guest/part-tags/"+encodeURIComponent(a)},N));case 5:return r=n.sent,n.next=8,Object(y.d)(ra(r.data));case 8:return n.next=10,Object(y.d)(ca());case 10:case"end":return n.stop()}}),ua)}function ma(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(sa());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/editor/tag-new",data:{tag:a}},N));case 6:return r=n.sent,n.next=9,Object(y.d)(da(r.data));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),delete n.t0.config,n.next=16,Object(y.d)(oa(n.t0));case 16:return n.prev=16,n.next=19,Object(y.d)(ia());case 19:return n.finish(16);case 20:case"end":return n.stop()}}),ja,null,[[1,11,16,20]])}var Oa="FETCH_GET_PART_TAGS",ha="FETCH_NEW_TAG",ga=k([[Oa,ba],[ha,ma]]),xa=C({sagaGetPartTags:Oa,sagaNewTag:ha}),pa=xa.sagaGetPartTags,fa=xa.sagaNewTag,va=Object(E.b)({name:"editorGroups",initialState:{groups:[],loadGroups:!1},reducers:{getGroups:function(e,t){e.groups=Object(Xe.a)(t.payload)},startLoadGroups:function(e,t){e.loadGroups=!0},endLoadGroups:function(e,t){e.loadGroups=!1}}}),wa=va.actions,ya=wa.getGroups,Ia=wa.startLoadGroups,La=wa.endLoadGroups,Ra=va.reducer,Ta=v.a.mark(Na);function Na(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,void 0===t?{}:t,r.next=3,Object(y.d)(Ia());case 3:return r.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/guest/groups"},N));case 5:return a=r.sent,r.next=8,Object(y.d)(ya(a.data));case 8:return r.next=10,Object(y.d)(La());case 10:case"end":return r.stop()}}),Ta)}var Ca="FETCH_GET_ALL_GROUPS",ka=k([[Ca,Na]]),Ea=C({sagaGetAllGroups:Ca}).sagaGetAllGroups,Sa=Object(E.b)({name:"editorTitles",initialState:{titles:[],loadTitles:!1,loadNewTitle:!1,errorNewTitle:!1,newTitle:!1},reducers:{getTitles:function(e,t){e.titles=Object(Xe.a)(t.payload)},startLoadTitles:function(e,t){e.loadTitles=!0},endLoadTitles:function(e,t){e.loadTitles=!1},startLoadNewTitle:function(e,t){e.loadNewTitle=!0},endLoadNewTitle:function(e,t){e.loadNewTitle=!1},errorNewTitle:function(e,t){e.errorNewTitle=t.payload},newTitle:function(e,t){e.titles=[t.payload].concat(Object(Xe.a)(e.titles)),e.newTitle=t.payload}}}),Ga=Sa.actions,_a=Ga.getTitles,Ua=Ga.startLoadTitles,Fa=Ga.endLoadTitles,Aa=Ga.startLoadNewTitle,Ma=Ga.endLoadNewTitle,Ha=Ga.errorNewTitle,Pa=Ga.newTitle,Ba=Sa.reducer,Wa=v.a.mark(Va),qa=v.a.mark(za);function Va(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(Ua());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/guest/part-titles/"+encodeURIComponent(a)},N));case 5:return r=n.sent,n.next=8,Object(y.d)(_a(r.data));case 8:return n.next=10,Object(y.d)(Fa());case 10:case"end":return n.stop()}}),Wa)}function za(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(Aa());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/editor/title-new",data:{title:a.title,description:a.description}},N));case 6:return r=n.sent,n.next=9,Object(y.d)(Pa(r.data));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),delete n.t0.config,n.next=16,Object(y.d)(Ha(n.t0));case 16:return n.prev=16,n.next=19,Object(y.d)(Ma());case 19:return n.finish(16);case 20:case"end":return n.stop()}}),qa,null,[[1,11,16,20]])}var Da="FETCH_GET_PART_TITLES",Ka="FETCH_NEW_TITLE",Ja=k([[Da,Va],[Ka,za]]),Qa=C({sagaGetPartTitles:Da,sagaNewTitle:Ka}),Xa=Qa.sagaGetPartTitles,Ya=Qa.sagaNewTitle,Za=Object(E.b)({name:"guestEditors",initialState:{partEditors:[],loadEditors:!1},reducers:{getEditors:function(e,t){e.partEditors=Object(Xe.a)(t.payload)},startLoadEditors:function(e,t){e.loadTiltes=!0},endLoadEditors:function(e,t){e.loadTiltes=!1}}}),$a=Za.actions,er=$a.getEditors,tr=$a.startLoadEditors,ar=$a.endLoadEditors,rr=Za.reducer,nr=v.a.mark(cr);function cr(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(tr());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/guest/editor-short-part/",params:{page:a.page}},N));case 5:return r=n.sent,n.next=8,Object(y.d)(er(r.data));case 8:return n.next=10,Object(y.d)(ar());case 10:case"end":return n.stop()}}),nr)}var sr="FETCH_GET_PART_EDITORS",ir=k([[sr,cr]]),or=C({sagaGetPartEditors:sr}).sagaGetPartEditors,dr=Object(E.b)({name:"customFilter",initialState:{filter:{},editorFilter:{}},reducers:{setFilterData:function(e,t){e.filter=t.payload},setEditorFilterData:function(e,t){e.editorFilter=t.payload}}}),lr=dr.actions,ur=lr.setFilterData,jr=lr.setEditorFilterData,br=dr.reducer;function mr(e){var t,a,n,c,s,d,j=Object(o.b)(),b=Object(i.f)(),m=Object(Fe.e)(),h=m.register,g=m.handleSubmit,x=m.setValue,p=m.control,f=(m.reset,m.formState.errors),y=Object(u.c)(),I=Object(l.a)(y,2),L=I[0],R=(I[1],Object(o.c)((function(e){return e.customFilter.editorFilter}))),T=Object(o.c)((function(e){return e.customFilter.filter})),N="editor"===e.typeFilter?R:T,C=Object(r.useState)(null),k=Object(l.a)(C,2),E=k[0],S=k[1],G=Object(r.useState)(null),_=Object(l.a)(G,2),U=_[0],F=_[1],A=Object(o.c)((function(e){return e.editorTags.tags})),M=Object(o.c)((function(e){return e.editorTags.loadTags})),H=Object(o.c)((function(e){return e.editorGroups.groups})),P=(Object(o.c)((function(e){return e.editorGroups.loadGroups})),Object(o.c)((function(e){return e.editorTitles.titles}))),B=Object(o.c)((function(e){return e.editorTitles.loadTitles})),W=Object(o.c)((function(e){return e.guestEditors.partEditors}));Object(o.c)((function(e){return e.guestEditors.loadEditors}));return Object(r.useLayoutEffect)((function(){H&&H.length>0&&E&&E.callback(H.map((function(e){return{value:e.id,label:e.group}})))}),[H]),Object(r.useLayoutEffect)((function(){W&&U&&(W.length>0?U.callback({options:W.map((function(e){var t=e.user&&e.social_id?e.user+"/"+e.social_id:e.user?e.user:e.social_id?e.social_id:"UNKNOWN";return e.userInfo&&(t+="(".concat(e.userInfo.first_name," ").concat(e.userInfo.last_name,")")),{value:e.id,label:t}})),hasMore:!0}):U.callback({options:[],hasMore:!1}))}),[W]),Object(Ce.jsx)(Jt.a,{rootClose:!0,delay:0,trigger:"click",placement:"bottom",overlay:Object(Ce.jsxs)(Qt.a,{id:"popover-filter-reviews",style:{minWidth:"500px"},children:[Object(Ce.jsx)(Qt.a.Header,{as:"h3",children:"Filter Selected Reviews"}),Object(Ce.jsx)(Qt.a.Body,{children:Object(Ce.jsxs)(_e.a,{onSubmit:g((function(t){var a=Object.keys(t).reduce((function(e,a){return t[a]&&(e[a]="tags"===a||"titles"===a?$t(t[a].map((function(e){return e.id}))):"authors"===a||"groups"===a?$t(t[a].map((function(e){return e.value}))):t[a]),e}),{});"editor"===e.typeFilter?j(jr(t)):j(ur(t)),b(("editor"===e.typeFilter?"/my-reviews":"/reviews")+"?"+We.a.stringify(a,{arrayFormat:"bracket"})),document.body.click()})),children:[Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formTags",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Tags"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(Fe.a,{name:"tags",control:p,defaultValue:function(){var e=L.getAll("tags[]");if(e){var t=N.tags||[];return e.map((function(e){var a=t.filter((function(t){return t.id==e}));return a.length<1?{id:1*e,tag:"tag_id_"+e}:a.at(-1)}))}return[]}(),render:function(e){var t=e.field,a=t.onChange,r=t.onBlur,n=t.value,c=t.ref;return Object(Ce.jsx)(Xt.a,{ref:c,id:"async-autocomplete-tags",minLength:2,delay:300,useCache:!1,labelKey:"tag",multiple:!0,isLoading:M,clearButton:!0,onChange:a,onBlur:r,selected:n,onSearch:function(e){j(pa(e))},options:A})}}),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(t=f.tags)||void 0===t?void 0:t.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formGroups",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Groups"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(Fe.a,{name:"groups",control:p,defaultValue:function(){var e=L.getAll("groups[]");if(e){var t=N.groups||[];return e.map((function(e){var a=t.filter((function(t){return t.id==e}));return a.length<1?{value:1*e,label:"group_id_"+e}:a.at(-1)}))}return[]}(),render:function(e){var t=e.field,a=t.onChange,r=(t.onBlur,t.value);t.ref;return Object(Ce.jsx)(Yt.a,{loadOptions:function(e,t){S({callback:t}),j(Ea())},onChange:a,value:r,isMulti:!0,isSearchable:!1,defaultOptions:!0})}}),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(a=f.groups)||void 0===a?void 0:a.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formTitles",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Titles"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(Fe.a,{name:"titles",control:p,defaultValue:function(){var e=L.getAll("titles[]");if(e){var t=N.titles||[];return e.map((function(e){var a=t.filter((function(t){return t.id==e}));return a.length<1?{id:1*e,title:"title_id_"+e}:a.at(-1)}))}return[]}(),render:function(e){var t=e.field,a=t.onChange,r=t.onBlur,n=t.value,c=t.ref;return Object(Ce.jsx)(Xt.a,{ref:c,id:"async-autocomplete-titles",minLength:3,delay:300,useCache:!1,labelKey:"title",multiple:!0,isLoading:B,clearButton:!0,onChange:a,onBlur:r,selected:n,onSearch:function(e){j(Xa(e))},options:P})}}),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(n=f.tags)||void 0===n?void 0:n.message})]})]}),e.withAuthors?Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formAuthos",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Authors"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(Fe.a,{name:"authors",control:p,defaultValue:function(){var e=L.getAll("authors[]");if(e){var t=N.authos||[];return e.map((function(e){var a=t.filter((function(t){return t.id==e}));return a.length<1?{value:1*e,label:"author_id_"+e}:a.at(-1)}))}return[]}(),render:function(e){var t=e.field,a=t.onChange,r=(t.onBlur,t.value);t.ref;return Object(Ce.jsx)(Zt.a,{isMulti:!0,isSearchable:!1,loadOptions:function(){var e=Object(Kt.a)(v.a.mark((function e(t,a,r){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.page,j(or({page:n})),e.next=4,new Promise((function(e,t){F({callback:function(t){t.additional={page:n+1},e(t)}})}));case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),onChange:a,value:r,additional:{page:1},defaultOptions:!0})}}),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(c=f.groups)||void 0===c?void 0:c.message})]})]}):null,Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Sorting"}),Object(Ce.jsxs)(Se.a,{sm:"5",children:[Object(Ce.jsxs)(_e.a.Select,Object(w.a)(Object(w.a)({},h("sortField")),{},{defaultValue:L.get("sortField"),isInvalid:!!f.sortField,children:[Object(Ce.jsx)("option",{value:"",selected:!0,disabled:!0,children:"Chose field"}),e.sortFields.map((function(e,t){return Object(Ce.jsx)("option",{value:e,children:e},t)}))]})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(s=f.sortField)||void 0===s?void 0:s.message})]}),Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"type"}),Object(Ce.jsxs)(Se.a,{sm:"3",children:[Object(Ce.jsxs)(_e.a.Select,Object(w.a)(Object(w.a)({},h("sortType")),{},{defaultValue:L.get("sortType"),isInvalid:!!f.sortType,children:[Object(Ce.jsx)("option",{value:"",selected:!0,disabled:!0,children:"Chose type"}),Object(Ce.jsx)("option",{value:"ASC",children:"ASC"}),Object(Ce.jsx)("option",{value:"DESC",children:"DESC"})]})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(d=f.sortType)||void 0===d?void 0:d.message})]})]}),Object(Ce.jsxs)(Ee.a,{className:"justify-content-end",children:[Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-danger",type:"button",onClick:function(){b("?"),x("groups",[]),x("authors",[]),x("tags",[]),x("titles",[]),x("sortField",null),x("sortType",null)},children:"reset"})}),Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-success",type:"submit",children:"filter"})})]})]})})]}),children:Object(Ce.jsx)(O.a,{variant:"outline-primary",children:"Filters"})})}var Or=Object(E.b)({name:"userReviews",initialState:{data:[],dataItem:{},dataItemLoading:!1},reducers:{moreReviews:function(e,t){e.data=[].concat(Object(Xe.a)(e.data),Object(Xe.a)(t.payload))},getReviews:function(e,t){e.data=Object(Xe.a)(t.payload)},getReview:function(e,t){e.dataItem=t.payload,e.dataItemLoading=!1},getReviewLoading:function(e,t){e.dataItemLoading=!0},getReviewError:function(e,t){e.dataItemLoading=!1}}}),hr=Or.actions,gr=hr.moreReviews,xr=hr.getReviews,pr=hr.getReview,fr=hr.getReviewLoading,vr=(hr.getReviewError,Or.reducer),wr=v.a.mark(Lr),yr=v.a.mark(Rr),Ir=v.a.mark(Tr);function Lr(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.b)(R,Object(w.a)({method:"get",url:"/".concat(a.isUser?"user":"guest","/reviews"),params:a.params},N));case 4:return r=n.sent,n.next=7,Object(y.d)(gr(r.data));case 7:n.next=12;break;case 9:throw n.prev=9,n.t0=n.catch(1),n.t0;case 12:case"end":return n.stop()}}),wr,null,[[1,9]])}function Rr(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.b)(R,Object(w.a)({method:"get",url:"/".concat(a.isUser?"user":"guest","/reviews"),params:a.params},N));case 4:return r=n.sent,n.next=7,Object(y.d)(xr(r.data));case 7:n.next=12;break;case 9:throw n.prev=9,n.t0=n.catch(1),n.t0;case 12:case"end":return n.stop()}}),yr,null,[[1,9]])}function Tr(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(y.d)(fr());case 4:return r.next=6,Object(y.b)(R,Object(w.a)({method:"get",url:"/".concat(t.isUser?"user":"guest","/review/").concat(t.id)},N));case 6:return a=r.sent,r.next=9,Object(y.d)(pr(a.data));case 9:r.next=14;break;case 11:throw r.prev=11,r.t0=r.catch(1),r.t0;case 14:case"end":return r.stop()}}),Ir,null,[[1,11]])}var Nr="FETCH_MORE_REVIEWS",Cr="FETCH_GET_REVIEWS",kr="FETCH_GET_REVIEW",Er=k([[Nr,Lr],[Cr,Rr],[kr,Tr]]),Sr=C({sagaMoreReviews:Nr,sagaGetReviews:Cr,sagaGetReview:kr}),Gr=(Sr.sagaMoreReviews,Sr.sagaGetReviews),_r=Sr.sagaGetReview,Ur=["authorRating","averageEditorRating","averageUserRating","countComments","createdAt","updatedAt"];function Fr(){var e=Object(h.a)(),t=Object(l.a)(e,3),a=t[0],n=(t[2],Object(o.c)((function(e){return e.userReviews.data}))),c=Object(o.b)(),s=Object(u.c)(),i=Object(l.a)(s,1)[0];return Object(r.useEffect)((function(){c(Gr({params:i,isUser:g(a.Roles)}))}),[i]),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)(d.a,{className:"border border-primary rounded bg-light mt-1",children:Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{md:"auto",className:"mt-3 mb-3",children:Object(Ce.jsx)(mr,{withAuthors:!0,sortFields:Ur,typeFilter:"guest"})})})})})}),Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:n.map((function(e){var t,a,r,n,c,s,i,o;return Object(Ce.jsx)(Dt,{id:e.id,title:null===(t=e.groupTitle)||void 0===t||null===(a=t.title)||void 0===a?void 0:a.title,group:null===(r=e.groupTitle)||void 0===r||null===(n=r.group)||void 0===n?void 0:n.group,ratings:e.ratings||[],likes:e.likes||[],description:e.description,date:e.createdAt,authorRating:e.authorRating,author:[(null===(c=e.user)||void 0===c||null===(s=c.userInfo)||void 0===s?void 0:s.first_name)||"Unknown",(null===(i=e.user)||void 0===i||null===(o=i.userInfo)||void 0===o?void 0:o.last_name)||"Unknown"]},e.id)}))})})]})}var Ar=a(285),Mr=Object(E.b)({name:"userTags",initialState:{data:[]},reducers:{getAllTags:function(e,t){e.data=Object(Xe.a)(t.payload)}}}),Hr=Mr.actions.getAllTags,Pr=Mr.reducer,Br=v.a.mark(Wr);function Wr(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.b)(R,Object(w.a)({method:"get",url:"/guest/tags".concat(a.order?"/order-true":"")},N));case 4:return r=n.sent,n.next=7,Object(y.d)(Hr(r.data));case 7:n.next=12;break;case 9:throw n.prev=9,n.t0=n.catch(1),n.t0;case 12:case"end":return n.stop()}}),Br,null,[[1,9]])}var qr="FETCH_GET_ALL_TAGS",Vr=k([[qr,Wr]]),zr=C({sagaGetAllTags:qr}).sagaGetAllTags;function Dr(e){Object(Ue.a)().t;var t=Object(o.c)((function(e){return e.userTags.data})),a=Object(o.b)(),n=Object(i.f)(),c={},s=t.map((function(e){return c[e.tag]=e.id,{value:e.countReview,text:e.tag}}));return Object(r.useEffect)((function(){a(zr({order:!0}))}),[]),Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)(Ar.a,{className:"border border-primary rounded bg-light mt-1 mb-1",words:s,options:{rotations:2,rotationAngles:[0,0]},callbacks:{getWordTooltip:function(e){return""},onWordClick:function(e,t){n("/reviews?"+We.a.stringify({tags:[c[e.text]]},{arrayFormat:"bracket"}))},onWordMouseOut:function(e,t){t.target.setAttribute("font-size",Number.parseInt(t.target.getAttribute("font-size"))/2+"px"),t.target.setAttribute("text-decoration","none")},onWordMouseOver:function(e,t){t.target.setAttribute("font-size",2*Number.parseInt(t.target.getAttribute("font-size"))+"px"),t.target.setAttribute("text-decoration","underline")}},size:[250,250]})})})}function Kr(){return Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(ze,{}),Object(Ce.jsx)(It,{content:Object(Ce.jsx)(Fr,{}),rightbar:Object(Ce.jsx)(Dr,{})})]})}var Jr=a(23),Qr=a(32),Xr=a(34),Yr=a(208),Zr=Object(Yr.a)("countRows"),$r=Object(Yr.a)("currentPage"),en=Object(Yr.a)("lastAddCountRow"),tn=function(){function e(t){Object(Jr.a)(this,e),Object.defineProperty(this,Zr,{writable:!0,value:0}),Object.defineProperty(this,$r,{writable:!0,value:1}),Object.defineProperty(this,en,{writable:!0,value:0}),Object(Xr.a)(this,Zr)[Zr]=1*t}return Object(Qr.a)(e,[{key:"replace",value:function(e,t,a){if(!Array.isArray(a))throw new Error("Third argument must be Array");e[t]=Object(Xe.a)(a),a.length>=Object(Xr.a)(this,Zr)[Zr]?(Object(Xr.a)(this,$r)[$r]++,Object(Xr.a)(this,en)[en]=0):Object(Xr.a)(this,en)[en]=a.length}},{key:"remove",value:function(e,t,a){var r=this;if("function"!==typeof a)throw new Error("Third argument must be Function");e[t].length,Object(Xr.a)(this,en)[en];e[t]=e[t].filter((function(e,t,n){var c=a(e,t,n);return c&&(Object(Xr.a)(r,en)[en]--,Object(Xr.a)(r,en)[en]<0&&(Object(Xr.a)(r,en)[en]=Object(Xr.a)(r,Zr)[Zr]-1,Object(Xr.a)(r,$r)[$r]--,Object(Xr.a)(r,$r)[$r]<1&&(Object(Xr.a)(r,$r)[$r]=1))),c}))}},{key:"append",value:function(e,t,a){if(!Array.isArray(a))throw new Error("Third argument must be Array");e[t]=[].concat(Object(Xe.a)(a),Object(Xe.a)(e[t]))}},{key:"addWithReplace",value:function(e,t,a){if(!Array.isArray(a))throw new Error("Third argument must be Array");if(0===Object(Xr.a)(this,en)[en])e[t]=[].concat(Object(Xe.a)(e[t]),Object(Xe.a)(a));else{var r=e[t].length-Object(Xr.a)(this,en)[en];e[t]=[e[t].slice(0,r<0?e[t].length:r)].concat(Object(Xe.a)(a))}a.length>=Object(Xr.a)(this,Zr)[Zr]?(Object(Xr.a)(this,$r)[$r]++,Object(Xr.a)(this,en)[en]=0):Object(Xr.a)(this,en)[en]=a.length}},{key:"addToEnd",value:function(e,t,a){if(!Array.isArray(a))throw new Error("Third argument must be Array");e[t]=[].concat(Object(Xe.a)(e[t]),Object(Xe.a)(a)),Object(Xr.a)(this,en)[en]+=a.length,Object(Xr.a)(this,en)[en]>=Object(Xr.a)(this,Zr)[Zr]&&(Object(Xr.a)(this,$r)[$r]+=Math.floor(Object(Xr.a)(this,en)[en]/Object(Xr.a)(this,Zr)[Zr]),Object(Xr.a)(this,en)[en]=Object(Xr.a)(this,en)[en]%Object(Xr.a)(this,Zr)[Zr])}},{key:"getPageForQuery",value:function(){return Object(Xr.a)(this,$r)[$r]}}]),e}(),an=Object(E.b)({name:"userComments",initialState:{reviewId:null,paginator:new tn(20),comments:[],commentsLoading:!1,commentsMoreLoading:!1,commentsAutoUpdateLoading:!1,newComment:!1,newCommentLoading:!1,newCommentError:!1},reducers:{setReviewId:function(e,t){e.reviewId=t.payload},moreComments:function(e,t){e.paginator.addWithReplace(e,"comments",t.payload)},startLoadMoreComments:function(e,t){e.commentsMoreLoading=!0},endLoadMoreComments:function(e,t){e.commentsMoreLoading=!1},getComments:function(e,t){e.paginator.replace(e,"comments",t.payload)},startLoadGetComments:function(e,t){e.commentsLoading=!0},endLoadGetComments:function(e,t){e.commentsLoading=!1},startLoadNewComment:function(e,t){e.newCommentLoading=!0},endLoadNewComment:function(e,t){e.newCommentLoading=!1},newComment:function(e,t){e.newComment=t.payload},errorNewComment:function(e,t){e.newCommentError=t.payload},autoUpdateComments:function(e,t){e.paginator.addToEnd(e,"comments",t.payload)},startLoadAutoUpdateComments:function(e,t){e.commentsAutoUpdateLoading=!0},endLoadAutoUpdateComments:function(e,t){e.commentsAutoUpdateLoading=!1}}}),rn=an.actions,nn=rn.moreComments,cn=rn.startLoadMoreComments,sn=rn.endLoadMoreComments,on=rn.getComments,dn=rn.startLoadGetComments,ln=rn.endLoadGetComments,un=rn.autoUpdateComments,jn=rn.startLoadAutoUpdateComments,bn=rn.endLoadAutoUpdateComments,mn=rn.startLoadNewComment,On=rn.endLoadNewComment,hn=rn.newComment,gn=rn.errorNewComment,xn=rn.setReviewId,pn=an.reducer;function fn(e){var t,a,n,c,s,j,b,m,O,x,p,f,v,w,y,I=Object(h.a)(),L=Object(l.a)(I,3),R=L[0],T=(L[2],Object(Ue.a)().t),N=Object(o.c)((function(e){return e.userReviews.dataItem})),C=Object(o.c)((function(e){return e.userReviews.dataItemLoading})),k=Object(o.b)(),E=Object(i.g)(),S=Object(r.useState)(!0),G=Object(l.a)(S,2),_=G[0],U=G[1];(Object(r.useEffect)((function(){k(_r({id:E.id,isUser:g(R.Roles)})),U(!1)}),[]),Object(r.useEffect)((function(){N&&k(xn(N.id))}),[N]),C||_)?t=Object(Ce.jsx)("h2",{children:"loading..."}):t=Object(Ce.jsxs)(d.a,{className:"border border-primary rounded bg-light mt-1 mb-1",children:[Object(Ce.jsxs)(Ee.a,{className:"mt-2",children:[Object(Ce.jsx)(Se.a,{className:"text-center",children:Object(Ce.jsx)("div",{children:g(R.Roles)?Object(Ce.jsx)(Ht,{data:N.ratings||[],reviewId:N.id}):null})}),Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)("div",{children:g(R.Roles)?Object(Ce.jsx)(zt,{data:N.likes||[],reviewId:N.id}):null})})]}),Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsxs)(Se.a,{className:"text-center",children:[Object(Ce.jsx)("span",{className:"h2",children:(null===(a=N.groupTitle)||void 0===a||null===(n=a.group)||void 0===n?void 0:n.group)||"Unknown"}),Object(Ce.jsx)("span",{className:"h2",children:" / "}),Object(Ce.jsx)("span",{className:"h2",children:(null===(c=N.groupTitle)||void 0===c||null===(s=c.title)||void 0===s?void 0:s.title)||"Unknown"})]})}),Object(Ce.jsx)(Ee.a,{className:"border-bottom border-top border-primary pt-1 pb-1 mt-3 mb-3",children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)(Lt.a,{children:(null===(j=N.groupTitle)||void 0===j||null===(b=j.title)||void 0===b?void 0:b.description)||"UNKNOWN"})})}),Object(Ce.jsxs)(Ee.a,{className:"float-start border border-primary rounded row-cols-1 text-center",style:{marginRight:"5px"},children:[Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("span",{className:"h1 text-info",children:N.authorRating||0})}),Object(Ce.jsx)(Se.a,{children:N.user?Object(Ce.jsx)(u.b,{to:"/reviews?"+We.a.stringify({authors:[N.userId]},{arrayFormat:"bracket"}),children:Object(Ce.jsxs)("span",{children:[(null===(m=N.user)||void 0===m||null===(O=m.userInfo)||void 0===O?void 0:O.first_name)||"Unknown"," ",(null===(x=N.user)||void 0===x||null===(p=x.userInfo)||void 0===p?void 0:p.last_name)||"Unknown"]})}):Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("span",{className:"text-secondary",children:[(null===(f=N.user)||void 0===f||null===(v=f.userInfo)||void 0===v?void 0:v.first_name)||"Unknown"," ",(null===(w=N.user)||void 0===w||null===(y=w.userInfo)||void 0===y?void 0:y.last_name)||"Unknown"]})})})]}),Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)(Lt.a,{children:N.text})})}),Object(Ce.jsxs)(Ee.a,{className:"justify-content-center",children:[Object(Ce.jsx)(Se.a,{children:Object(Ce.jsxs)(Ee.a,{className:"float-start border border-primary rounded row-cols-1 text-center text-success",children:[Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("h1",{children:N.averageEditorRating||0})}),Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("strong",{children:"Average Editors rating"})})]})}),Object(Ce.jsx)(Se.a,{children:Object(Ce.jsxs)(Ee.a,{className:"float-start border border-primary rounded row-cols-1 text-center text-danger",children:[Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("h1",{children:N.averageUserRating||0})}),Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("strong",{children:"Average Users rating"})})]})})]}),Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:(N.tags||[]).map((function(e,t){return Object(Ce.jsx)("span",{className:"m-2",children:Object(Ce.jsx)(u.b,{to:"/reviews?"+We.a.stringify({tags:[e.id]},{arrayFormat:"bracket"}),children:e.tag})},t)}))})}),Object(Ce.jsx)(Ee.a,{className:"text-end",children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("span",{className:"text-secondary",children:T("intlDateTime",{val:new Date(e.date)})})})})]});return Object(Ce.jsx)(Ce.Fragment,{children:t})}var vn=a(493),wn=v.a.mark(Rn),yn=v.a.mark(Tn),In=v.a.mark(Nn),Ln=v.a.mark(Cn);function Rn(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(dn());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/user/comments",params:a},N));case 5:return r=n.sent,n.next=8,Object(y.d)(on(r.data));case 8:return n.next=10,Object(y.d)(ln());case 10:case"end":return n.stop()}}),wn)}function Tn(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(cn());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/user/comments",params:a},N));case 5:return r=n.sent,n.next=8,Object(y.d)(nn(r.data));case 8:return n.next=10,Object(y.d)(sn());case 10:case"end":return n.stop()}}),yn)}function Nn(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(jn());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/user/auto-update-comments",params:a},N));case 5:return r=n.sent,n.next=8,Object(y.d)(un(r.data));case 8:return n.next=10,Object(y.d)(bn());case 10:case"end":return n.stop()}}),In)}function Cn(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(mn());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/user/new-comment",data:{comment:a.comment,reviewId:a.reviewId}},N));case 6:return r=n.sent,n.next=9,Object(y.d)(hn(r.data));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),delete n.t0.config,n.next=16,Object(y.d)(gn(n.t0));case 16:return n.prev=16,n.next=19,Object(y.d)(On());case 19:return n.finish(16);case 20:case"end":return n.stop()}}),Ln,null,[[1,11,16,20]])}var kn="FETCH_COMMENTS",En="FETCH_MORE_COMMENTS",Sn="FETCH_AUTO_UPDATE_COMMENTS",Gn="FETCH_NEW_COMMENT",_n=k([[kn,Rn],[En,Tn],[Sn,Nn],[Gn,Cn]]),Un=C({sagaGetComments:kn,sagaMoreComments:En,sagaAutoUpdateComments:Sn,sagaNewComment:Gn}),Fn=Un.sagaGetComments;Un.sagaMoreComments,Un.sagaAutoUpdateComments,Un.sagaNewComment;function An(e){return Object(Ce.jsx)("h2",{children:"hello world"})}var Mn=Me.d().shape({title:Me.f().required("Title is required").min(3,"Title must be maximum 3 characters"),description:Me.f().max(3e3,"Description must be maximum 3000 characters")});function Hn(e){Object(Ue.a)().t;var t,a=Object(o.b)(),n=Object(r.useState)(!1),c=Object(l.a)(n,2),s=c[0],i=c[1],u=Object(o.c)((function(e){return e.userComments.reviewId})),j=Object(o.c)((function(e){return e.userComments.comments})),b=Object(o.c)((function(e){return e.userComments.commentsLoading})),m=Object(r.useCallback)((function(){i(!1)}),[]),h=Object(r.useCallback)((function(){return i(!0)}),[]),g=Object(Fe.e)({resolver:Object(Ae.a)(Mn)}),x=g.register,p=g.handleSubmit,f=(g.setValue,g.formState.errors),v=Object(r.useRef)(!0);return Object(r.useEffect)((function(){v.current&&(v.current=!1),u&&a(Fn({reviewId:u}))}),[u]),Object(r.useEffect)((function(){return function(){a(xn(null))}}),[]),Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)(d.a,{className:"border border-primary rounded bg-light mt-1 mb-1",children:[b?Object(Ce.jsx)(Ze,{ignorePadding:!0,size:"4.5rem"}):null,Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("span",{className:"h4",children:"Comments:"})})}),j.length<=0?Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)("span",{className:"h4",children:"Comments Not Found"})})}):Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:j.map((function(e,t){return Object(Ce.jsx)(An,{},t)}))})}),Object(Ce.jsx)(Ee.a,{className:"mb-3 justify-content-end",children:Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-primary",onClick:h,children:"Create Comment"})})})]}),Object(Ce.jsxs)(vn.a,{show:s,onHide:m,animation:!1,centered:!0,size:"lg",children:[Object(Ce.jsx)(vn.a.Header,{closeButton:!0,children:Object(Ce.jsx)(vn.a.Title,{children:"Modal Create New Comment"})}),Object(Ce.jsx)(vn.a.Body,{children:Object(Ce.jsx)(_e.a,{id:"hook-modal-form",onSubmit:p((function(e){console.log(e)})),children:Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicComment",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"comment"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({as:"textarea"},x("comment")),{},{rows:5,placeholder:"Enter comment",isInvalid:!!f.comment})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(t=f.comment)||void 0===t?void 0:t.message})]})]})})}),Object(Ce.jsxs)(vn.a.Footer,{className:"justify-content-center",children:[Object(Ce.jsx)(O.a,{variant:"outline-secondary",onClick:m,children:"Close"}),Object(Ce.jsx)(O.a,{variant:"outline-success",type:"submit",form:"hook-modal-form",children:"Create Comment"})]})]})]})}function Pn(){var e=Object(h.a)(),t=Object(l.a)(e,3),a=t[0];t[2];return Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(ze,{}),Object(Ce.jsx)(It,{content:Object(Ce.jsx)(fn,{}),addContent:g(a.Roles)?Object(Ce.jsx)(Hn,{}):null,rightbar:Object(Ce.jsx)(Dr,{})})]})}var Bn=a(485),Wn=Object(E.b)({name:"editorReviews",initialState:{data:[],dataLoading:!1,dataMoreLoading:!1,dataItem:{},dataItemLoading:!1,dataItemSetLoading:!1,dataItemError:!1,dataItemNewLoading:!1,dataItemRemoveLoading:!1,dataItemRemoveError:!1,newReview:!1},reducers:{moreReviews:function(e,t){e.data=[].concat(Object(Xe.a)(e.data),Object(Xe.a)(t.payload))},startLoadMoreReviews:function(e,t){e.dataMoreLoading=!0},endLoadMoreReviews:function(e,t){e.dataMoreLoading=!1},getReviews:function(e,t){e.data=Object(Xe.a)(t.payload)},startLoadGetReviews:function(e,t){e.dataLoading=!0},endLoadGetReviews:function(e,t){e.dataLoading=!1},getReview:function(e,t){e.dataItem=t.payload},startLoadGetReview:function(e,t){e.dataItemLoading=!0},endLoadGetReview:function(e,t){e.dataItemLoading=!1},startLoadSetReview:function(e,t){e.dataItemSetLoading=!0},endLoadSetReview:function(e,t){e.dataItemSetLoading=!1},errorSetReview:function(e,t){e.dataItemError=t.payload},startLoadNewReview:function(e,t){e.dataItemNewLoading=!0},endLoadNewReview:function(e,t){e.dataItemNewLoading=!1},newReview:function(e,t){e.newReview=t.payload},startLoadRemoveReview:function(e,t){e.dataItemRemoveLoading=!0},endLoadRemoveReview:function(e,t){e.dataItemRemoveLoading=!1},errorRemoveReview:function(e,t){e.dataItemRemoveError=t.payload},removeReview:function(e,t){e.data=e.data.filter((function(e){return e.id!==t.payload.id}))}}}),qn=Wn.actions,Vn=qn.moreReviews,zn=qn.startLoadMoreReviews,Dn=qn.endLoadMoreReviews,Kn=qn.getReviews,Jn=qn.startLoadGetReviews,Qn=qn.endLoadGetReviews,Xn=qn.startLoadNewReview,Yn=qn.endLoadNewReview,Zn=qn.errorNewReview,$n=qn.newReview,ec=qn.removeReview,tc=qn.startLoadRemoveReview,ac=qn.endLoadRemoveReview,rc=qn.errorRemoveReview,nc=qn.getReview,cc=qn.startLoadGetReview,sc=qn.endLoadGetReview,ic=qn.startLoadSetReview,oc=qn.endLoadSetReview,dc=qn.errorSetReview,lc=Wn.reducer,uc=v.a.mark(gc),jc=v.a.mark(xc),bc=v.a.mark(pc),mc=v.a.mark(fc),Oc=v.a.mark(vc),hc=v.a.mark(wc);function gc(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(Jn());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/editor/reviews",params:a},N));case 5:return r=n.sent,n.next=8,Object(y.d)(Kn(r.data));case 8:return n.next=10,Object(y.d)(Qn());case 10:case"end":return n.stop()}}),uc)}function xc(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,void 0===t?{}:t,r.next=3,Object(y.d)(zn());case 3:return r.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/editor/reviews"},N));case 5:return a=r.sent,r.next=8,Object(y.d)(Vn(a.data));case 8:return r.next=10,Object(y.d)(Dn());case 10:case"end":return r.stop()}}),jc)}function pc(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(cc());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/editor/review/"+a},N));case 5:return r=n.sent,n.next=8,Object(y.d)(nc(r.data));case 8:return n.next=10,Object(y.d)(sc());case 10:case"end":return n.stop()}}),bc)}function fc(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(ic());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/editor/review-edit",data:{id:a.id,groupId:a.group,titleId:a.title,description:a.description||"",text:a.text||"",tags:a.tags||[],authorRating:a.authorRating||0,draft:a.draft}},N));case 6:return r=n.sent,n.next=9,Object(y.d)(nc(r.data));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),delete n.t0.config,n.next=16,Object(y.d)(dc(n.t0));case 16:return n.prev=16,n.next=19,Object(y.d)(oc());case 19:return n.finish(16);case 20:case"end":return n.stop()}}),mc,null,[[1,11,16,20]])}function vc(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,void 0===t?{}:t,r.prev=1,r.next=4,Object(y.d)(Xn());case 4:return r.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/editor/review-new",data:{}},N));case 6:return a=r.sent,r.next=9,Object(y.d)($n(a.data));case 9:r.next=16;break;case 11:return r.prev=11,r.t0=r.catch(1),delete r.t0.config,r.next=16,Object(y.d)(Zn(r.t0));case 16:return r.prev=16,r.next=19,Object(y.d)(Yn());case 19:return r.finish(16);case 20:case"end":return r.stop()}}),Oc,null,[[1,11,16,20]])}function wc(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(tc());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/editor/review-remove",data:{id:a.id}},N));case 6:return r=n.sent,n.next=9,Object(y.d)(ec(r.data));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),delete n.t0.config,n.next=16,Object(y.d)(rc(n.t0));case 16:return n.prev=16,n.next=19,Object(y.d)(ac());case 19:return n.finish(16);case 20:case"end":return n.stop()}}),hc,null,[[1,11,16,20]])}var yc="FETCH_REVIEWS",Ic="FETCH_MORE_REVIEWS",Lc="FETCH_REVIEW",Rc="FETCH_NEW_REVIEW",Tc="FETCH_EDIT_REVIEW",Nc="REMOVE_REVIEW",Cc=k([[yc,gc],[Ic,xc],[Lc,pc],[Rc,vc],[Tc,fc],[Nc,wc]]),kc=C({sagaGetReviews:yc,sagaMoreReviews:Ic,sagaGetReview:Lc,sagaNewReview:Rc,sagaEditReview:Tc,sagaRemoveReview:Nc}),Ec=kc.sagaGetReviews,Sc=(kc.sagaMoreReviews,kc.sagaGetReview),Gc=kc.sagaNewReview,_c=kc.sagaEditReview,Uc=kc.sagaRemoveReview;function Fc(e){Object(Ue.a)().t;var t,a,n,c,s,i,d,u,j=Object(o.b)(),b=e.entry,m=Object(r.useState)(!1),h=Object(l.a)(m,2),g=h[0],x=h[1],p=Object(r.useCallback)((function(){return x(!1)}),[]),f=Object(r.useCallback)((function(){return x(!0)}),[]),v=Object(r.useCallback)((function(){j(Uc(b)),x(!1)}),[b]);return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)("tr",{children:[Object(Ce.jsx)("td",{children:b.id}),Object(Ce.jsx)("td",{children:null===(t=b.groupTitle)||void 0===t||null===(a=t.group)||void 0===a?void 0:a.group}),Object(Ce.jsx)("td",{children:null===(n=b.groupTitle)||void 0===n||null===(c=n.title)||void 0===c?void 0:c.title}),Object(Ce.jsx)("td",{children:b.authorRating}),Object(Ce.jsx)("td",{children:b.averageEditorRating}),Object(Ce.jsx)("td",{children:b.averageUserRating}),Object(Ce.jsx)("td",{children:b.countComments}),Object(Ce.jsx)("td",{children:b.tags.map((function(e){return e.tag})).join(", ")}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(Lt.a,{children:b.description})}),Object(Ce.jsx)("td",{children:b.draft+""}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)("a",{href:"/review/"+b.id,className:"btn btn-outline-info btn-sm",role:"button","aria-pressed":"true",children:"V"})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)("a",{href:"/my-review-edit/"+b.id,className:"btn btn-outline-primary btn-sm",role:"button","aria-pressed":"true",children:"E"})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(O.a,{variant:"outline-danger",size:"sm",onClick:f,children:"R"})})]}),Object(Ce.jsxs)(vn.a,{show:g,onHide:p,animation:!1,centered:!0,size:"md",children:[Object(Ce.jsx)(vn.a.Header,{closeButton:!0,children:Object(Ce.jsx)(vn.a.Title,{children:"Modal Confirm Removing Review"})}),Object(Ce.jsxs)(vn.a.Body,{children:["Are you sure you want to remove review id: ",b.id," ",null===(s=b.groupTitle)||void 0===s||null===(i=s.group)||void 0===i?void 0:i.group,"/",null===(d=b.groupTitle)||void 0===d||null===(u=d.title)||void 0===u?void 0:u.title,"?"]}),Object(Ce.jsxs)(vn.a.Footer,{className:"justify-content-center",children:[Object(Ce.jsx)(O.a,{variant:"secondary",onClick:p,children:"Close"}),Object(Ce.jsx)(O.a,{variant:"danger",onClick:v,children:"Remove Review"})]})]})]})}var Ac=["authorRating","averageEditorRating","averageUserRating","countComments","createdAt","draft","updatedAt"];function Mc(){var e=Object(o.c)((function(e){return e.editorReviews.data})),t=Object(o.c)((function(e){return e.editorReviews.newReview})),a=(Object(o.c)((function(e){return e.editorReviews.dataLoading})),Object(o.b)()),n=(Object(i.g)(),Object(i.f)()),c=Object(u.c)(),s=Object(l.a)(c,1)[0];Object(r.useEffect)((function(){a(Ec(s))}),[s]);var d=Object(r.useCallback)((function(){a(Gc())}));return Object(r.useEffect)((function(){t&&(n("/my-review-edit/"+t.id),a($n(!1)))}),[t]),Object(Ce.jsx)("div",{className:"border border-primary rounded bg-light mt-1 mb-1",children:Object(Ce.jsxs)(Bn.a,{striped:!0,bordered:!0,hover:!0,className:"rounded mb-0",children:[Object(Ce.jsxs)("thead",{children:[Object(Ce.jsxs)("tr",{children:[Object(Ce.jsx)("td",{colSpan:"10",children:Object(Ce.jsx)(mr,{withAuthors:!1,sortFields:Ac,typeFilter:"editor"})}),Object(Ce.jsx)("td",{className:"text-center",colSpan:"3",children:Object(Ce.jsx)(O.a,{variant:"outline-success",onClick:d,children:"Create"})})]}),Object(Ce.jsxs)("tr",{children:[Object(Ce.jsx)("th",{className:"text-center",children:"#"}),Object(Ce.jsx)("th",{className:"text-center",children:"Group"}),Object(Ce.jsx)("th",{className:"text-center",children:"Title"}),Object(Ce.jsx)("th",{className:"text-center",children:"AR"}),Object(Ce.jsx)("th",{className:"text-center",children:"AAR"}),Object(Ce.jsx)("th",{className:"text-center",children:"AUR"}),Object(Ce.jsx)("th",{className:"text-center",children:"comms"}),Object(Ce.jsx)("th",{className:"text-center",children:"tags"}),Object(Ce.jsx)("th",{className:"text-center",children:"description"}),Object(Ce.jsx)("th",{className:"text-center",children:"draft"}),Object(Ce.jsx)("th",{className:"text-center",colSpan:"3",children:"actions"})]})]}),Object(Ce.jsx)("tbody",{children:e.map((function(e,t){return Object(Ce.jsx)(Fc,{entry:e,imdex:t},t)}))})]})})}function Hc(){return Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(ze,{}),Object(Ce.jsx)(Mc,{})]})}var Pc=a(488),Bc=a(496),Wc=Object(E.b)({name:"editorImages",initialState:{modalImages:!1,urlImageToInsert:!1,images:[],loadImages:!1,loadMoreImages:!1,loadNewImage:!1,errorNewImage:!1,newImage:!1,progressLoadNewImage:0,selectedImageInsert:null,selectedImageUpload:null},reducers:{showModalImage:function(e,t){e.modalImages=!0},hideModalImage:function(e,t){e.modalImages=!1},setURLImageToInsert:function(e,t){e.urlImageToInsert=t.payload},getImages:function(e,t){e.images=Object(Xe.a)(t.payload)},startLoadImages:function(e,t){e.loadImages=!0},endLoadImages:function(e,t){e.loadImages=!1},moreImages:function(e,t){e.images=[].concat(Object(Xe.a)(e.images),Object(Xe.a)(t.payload))},startLoadMoreImages:function(e,t){e.loadMoreImages=!0},endLoadMoreImages:function(e,t){e.loadMoreImages=!1},startLoadNewImage:function(e,t){e.loadNewImage=!0},endLoadNewImage:function(e,t){e.loadNewImage=!1},progressLoadNewImageAC:function(e,t){e.progressLoadNewImage=t.payload},errorNewImageAC:function(e,t){e.errorNewImage=t.payload},newImageAC:function(e,t){e.images=[].concat(Object(Xe.a)(t.payload),Object(Xe.a)(e.images)),e.newImage=t.payload},selectedImageInsertAC:function(e,t){e.selectedImageInsert=t.payload},selectedImageUploadAC:function(e,t){e.selectedImageUpload=t.payload}}}),qc=Wc.actions,Vc=qc.showModalImage,zc=qc.hideModalImage,Dc=qc.setURLImageToInsert,Kc=qc.getImages,Jc=qc.startLoadImages,Qc=qc.endLoadImages,Xc=qc.moreImages,Yc=qc.startLoadMoreImages,Zc=qc.endLoadMoreImages,$c=qc.selectedImageInsertAC,es=qc.selectedImageUploadAC,ts=qc.startLoadNewImage,as=qc.endLoadNewImage,rs=qc.errorNewImageAC,ns=qc.newImageAC,cs=qc.progressLoadNewImageAC,ss=Wc.reducer,is=a(287),os=a(486),ds=a(487),ls=v.a.mark(bs),us=v.a.mark(ms),js=v.a.mark(Os);function bs(e){var t,a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,void 0===t?{}:t,r.next=3,Object(y.d)(Jc());case 3:return r.next=5,Object(y.b)(R,Object(w.a)({method:"get",url:"/editor/images"},N));case 5:return a=r.sent,r.next=8,Object(y.d)(Kc(a.data));case 8:return r.next=10,Object(y.d)(Qc());case 10:case"end":return r.stop()}}),ls)}function ms(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.next=3,Object(y.d)(Yc());case 3:return n.next=5,Object(y.b)(R,Object(w.a)({method:"get",params:{page:a.page},url:"/editor/images"},N));case 5:return r=n.sent,n.next=8,Object(y.d)(Xc(r.data));case 8:return n.next=10,Object(y.d)(Zc());case 10:case"end":return n.stop()}}),us)}function Os(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.d)(ts());case 4:return n.next=6,Object(y.b)(R,Object(w.a)({method:"post",url:"/editor/image-new",data:a.data,onUploadProgress:a.progress},N));case 6:return r=n.sent,n.next=9,Object(y.d)(ns(r.data));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),delete n.t0.config,n.next=16,Object(y.d)(rs(n.t0));case 16:return n.prev=16,n.next=19,Object(y.d)(as());case 19:return n.finish(16);case 20:case"end":return n.stop()}}),js,null,[[1,11,16,20]])}var hs="FETCH_GET_PART_IMAGES",gs="FETCH_NEW_IMAGE",xs="FETCH_MORE_PART_IMAGES",ps=k([[hs,bs],[xs,ms],[gs,Os]]),fs=C({sagaGetPartImages:hs,sagaMorePartImages:xs,sagaNewImage:gs}),vs=fs.sagaGetPartImages,ws=fs.sagaMorePartImages,ys=fs.sagaNewImage;function Is(){var e=Object(o.c)((function(e){return e.editorImages.selectedImageUpload})),t=Object(o.c)((function(e){return e.editorImages.selectedImageInsert})),a=Object(o.c)((function(e){return e.editorImages.errorNewImage})),n=Object(o.c)((function(e){return e.editorImages.progressLoadNewImage})),c=Object(o.c)((function(e){return e.editorImages.loadNewImage})),s=Object(o.c)((function(e){return e.editorImages.newImage})),i=Object(o.b)();Object(r.useEffect)((function(){s.length>0&&e&&i($c(s[0]))}),[s]);var d=Object(r.useCallback)((function(){var t=new FormData;t.append("images[]",e),i(ys({data:t,progress:function(e){i(cs(Math.round(100*e.loaded/e.total)))}})),i(cs(0))}));return e?Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:a?Object(Ce.jsxs)(Ge.a,{variant:"danger",onClose:function(){return i(rs(!1))},dismissible:!0,children:[Object(Ce.jsx)(Ge.a.Heading,{children:"Server Error Message"}),Object(Ce.jsx)("p",{children:a.data.message||a.data.reason})]}):null})}),Object(Ce.jsx)(Ee.a,{className:"justify-content-center",children:Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)(os.a,{src:URL.createObjectURL(e),style:{height:"250px"},fluid:!0})})}),Object(Ce.jsx)(Ee.a,{className:"align-items-center justify-content-center",style:{height:"50px"},children:c?Object(Ce.jsx)(Se.a,{children:Object(Ce.jsx)(ds.a,{animated:!0,variant:"info",now:n})}):t?Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)("h2",{children:"Upload complete"})}):Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-info",onClick:d,children:"Upload"})})})]}):Object(Ce.jsx)(is.a,{onDrop:function(e){i(es(e[0]))},children:function(e){var t=e.getRootProps,a=e.getInputProps;return Object(Ce.jsx)("section",{children:Object(Ce.jsxs)("div",Object(w.a)(Object(w.a)({},t({})),{},{children:[Object(Ce.jsx)("input",Object(w.a)({},a({multiple:!1,accept:"image/*"}))),Object(Ce.jsx)(Ee.a,{className:"justify-content-center align-items-center border border-secondary border-1 bg-info rounded",style:{cursor:"pointer",height:"300px"},children:Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)("span",{className:"h3 text-light",children:"Drag 'n' drop some files here, or click to select files"})})})]}))})}})}function Ls(){var e=Object(r.useState)(1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(o.c)((function(e){return e.editorImages.images})),s=Object(o.c)((function(e){return e.editorImages.loadImages})),i=Object(o.c)((function(e){return e.editorImages.selectedImageInsert})),u=Object(o.c)((function(e){return e.editorImages.loadMoreImages})),j=Object(o.b)();return Object(r.useEffect)((function(){j(vs())}),[]),Object(r.useEffect)((function(){20*a-20>c.length&&n(a-1)}),[c]),Object(Ce.jsxs)(d.a,{children:[s?Object(Ce.jsx)(Ze,{size:"3.25rem"}):null,Object(Ce.jsx)(Ee.a,{className:"align-items-center",children:c.map((function(e,t){var a="",r={};return i&&e.url===i.url&&(a="border border-warning border-5 bg-warning bg-gradient",r={maxWidth:"181px",maxHeight:"181px"}),Object(Ce.jsx)(Se.a,{sm:"auto",className:"text-center "+a,style:{width:"191px",height:"191px",padding:"0px"},children:Object(Ce.jsx)("span",{children:Object(Ce.jsx)(os.a,{src:e.url,style:Object(w.a)(Object(w.a)({},{maxWidth:"191px",maxHeight:"191px"}),r),onClick:function(){i&&i.url!==e.url&&j(es(null)),j($c(e))},thumbnail:!0})})},t)}))}),Object(Ce.jsx)(Ee.a,{className:"mt-3",children:Object(Ce.jsxs)(Se.a,{children:[u?Object(Ce.jsx)(Ze,{size:"1.25rem"}):null,Object(Ce.jsx)(O.a,{variant:"outline-primary",style:{width:"100%"},onClick:function(){j(ws({page:a+1})),n(a+1)},children:"more images"})]})})]})}function Rs(){var e=Object(r.useState)("UploadImage"),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(o.c)((function(e){return e.editorImages.modalImages})),s=Object(o.c)((function(e){return e.editorImages.selectedImageInsert})),i=Object(o.c)((function(e){return e.editorImages.selectedImageUpload})),d=Object(o.c)((function(e){return e.editorImages.urlImageToInsert})),u=Object(o.b)();return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(vn.a,{show:c,onHide:function(){u(zc())},animation:!1,centered:!0,size:"lg",children:[Object(Ce.jsx)(vn.a.Header,{closeButton:!0,children:Object(Ce.jsx)(vn.a.Title,{children:"Modal heading"})}),Object(Ce.jsx)(vn.a.Body,{children:Object(Ce.jsxs)(Pc.a,{activeKey:a,onSelect:function(e){return n(e)},id:"uncontrolled-tab",className:"mb-3",children:[Object(Ce.jsx)(Bc.a,{eventKey:"ImageLists",title:"ImageLists",children:Object(Ce.jsx)(Ls,{})}),Object(Ce.jsx)(Bc.a,{eventKey:"UploadImage",title:"UploadImage",children:Object(Ce.jsx)(Is,{})})]})}),Object(Ce.jsxs)(vn.a.Footer,{className:"justify-content-center",children:[Object(Ce.jsx)(O.a,{variant:"outline-secondary",onClick:function(){u(zc())},children:"Close"}),Object(Ce.jsx)(O.a,{variant:"outline-secondary",disabled:!s&&!i,onClick:function(){u(es(null)),u($c(null))},children:"Reset"}),Object(Ce.jsx)(O.a,{variant:"outline-primary",disabled:!s,onClick:function(){u(es(null)),u($c(null)),u(Dc({key:d.key,url:s.url}))},children:"Insert Image"})]})]})})}var Ts=a(109);function Ns(e){Object(o.c)((function(e){return e.editorImages.modalImages}));var t=Object(o.c)((function(e){return e.editorImages.urlImageToInsert})),a=Object(o.b)();return Object(r.useEffect)((function(){t&&t.url&&t.key===e.editor&&(e.editor.insertText("![This is an image](".concat(t.url,")")),a(Dc({key:e.editor,url:null})),a(zc()))}),[t]),Object(r.useEffect)((function(){a(Dc({key:e.editor,url:null}))}),[]),Object(Ce.jsx)("span",{className:"button",title:"Custom Images",onClick:function(){a(Dc({key:e.editor,url:null})),a(Vc())},children:"images"})}Ns.defaultConfig={},Ns.align="left",Ns.pluginName="custom extends images";a(462);Ts.b.unuse(Ts.a.Image),Ts.b.use(Ns);var Cs=Me.d().shape({group:Me.c().required("Group is required"),title:Me.c().required("Title is required"),description:Me.f().max(3e3,"Description must be maximum 3000 characters"),text:Me.f().max(65e3,"Description must be maximum 65000 characters"),tags:Me.a().of(Me.c()),authorRating:Me.c(),draft:Me.b()}),ks=Me.d().shape({title:Me.f().required("Title is required").min(3,"Title must be maximum 3 characters"),description:Me.f().max(3e3,"Description must be maximum 3000 characters")});function Es(e){Object(Ue.a)().t;var t,a,n,c,s,u,j,b,m,h=Object(r.useRef)(),g=Object(r.useRef)(),x=Object(r.useState)([]),p=Object(l.a)(x,2),f=p[0],v=p[1],y=Object(o.c)((function(e){return e.editorReviews.dataItem})),I=Object(o.c)((function(e){return e.editorReviews.dataItemLoading})),L=Object(o.c)((function(e){return e.editorReviews.dataItemError})),R=(Object(o.c)((function(e){return e.editorReviews.dataItemSetLoading})),Object(o.b)()),T=Object(i.g)(),N=Object(r.useState)(!0),C=Object(l.a)(N,2),k=C[0],E=C[1],S=Object(r.useState)(!1),G=Object(l.a)(S,2),_=G[0],U=G[1],F=Object(o.c)((function(e){return e.editorGroups.groups})),A=Object(o.c)((function(e){return e.editorGroups.loadGroups})),M=Object(o.c)((function(e){return e.editorTitles.titles})),H=Object(o.c)((function(e){return e.editorTitles.loadTitles})),P=Object(o.c)((function(e){return e.editorTitles.newTitle})),B=Object(o.c)((function(e){return e.editorTitles.loadNewTitle})),W=Object(o.c)((function(e){return e.editorTags.tags})),q=Object(o.c)((function(e){return e.editorTags.loadTags})),V=Object(o.c)((function(e){return e.editorTags.newTag}));Object(o.c)((function(e){return e.editorTags.loadNewTag}));Object(r.useEffect)((function(){R(Sc(T.id)),R(Ea()),E(!1)}),[]);var z=Object(Fe.e)({resolver:Object(Ae.a)(Cs)}),D=z.register,K=z.handleSubmit,J=z.setValue,Q=z.formState.errors,X=Object(Fe.e)({resolver:Object(Ae.a)(ks)}),Y=X.register,Z=X.handleSubmit,$=X.setValue,ee=X.formState.errors;console.log(y,Q);var te=Object(r.useCallback)((function(){U(!1)}),[]);Object(r.useCallback)((function(){return U(!0)}),[]);return Object(r.useEffect)((function(){P&&(J("title",P.id),h.current.hideMenu())}),[P]),Object(r.useEffect)((function(){V&&v([].concat(Object(Xe.a)(f),[V]))}),[V]),Object(r.useEffect)((function(){y.tags&&v(Object(Xe.a)(y.tags))}),[y]),Object(Ce.jsxs)(d.a,{className:"border border-primary rounded bg-light mt-1 mb-1",children:[Object(Ce.jsx)(Rs,{}),Object(Ce.jsx)(Ee.a,{className:"mt-2",children:Object(Ce.jsx)(Se.a,{children:L?Object(Ce.jsxs)(Ge.a,{variant:"danger",onClose:function(){R(dc(!1))},dismissible:!0,children:[Object(Ce.jsx)(Ge.a.Heading,{children:"Server Error Message"}),Object(Ce.jsx)("p",{children:L.data.reason||L.data.message})]}):null})}),Object(Ce.jsx)(Ee.a,{className:"justify-content-center",children:Object(Ce.jsx)(Se.a,{sm:"auto",children:Object(Ce.jsx)("h4",{children:"Create New Review"})})}),Object(Ce.jsx)(Ee.a,{className:"mb-2",children:Object(Ce.jsx)(Se.a,{children:Object(Ce.jsxs)(_e.a,{onSubmit:K((function(e){console.log(e),R(_c(Object(w.a)({id:y.id},e)))})),children:[Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicGroup",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Group"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[A?Object(Ce.jsx)(Ze,{size:"1.25rem"}):null,k||A||I?null:Object(Ce.jsx)(_e.a.Select,Object(w.a)(Object(w.a)({},D("group")),{},{defaultValue:y.groupTitle.group.id,isInvalid:!!Q.group,children:F.map((function(e,t){return Object(Ce.jsx)("option",{value:e.id,children:e.group},t)}))})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(t=Q.group)||void 0===t?void 0:t.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicTitle",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Title"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[B?Object(Ce.jsx)(Ze,{size:"1.25rem"}):null,k||I?null:Object(Ce.jsx)(Xt.a,{ref:h,id:"async-title",minLength:3,allowNew:!0,delay:300,useCache:!1,labelKey:"title",isLoading:H,clearButton:!0,defaultSelected:[y.groupTitle.title],onChange:function(e){e.length>0?e[0].customOption?(U(!0),$("title",e[0].title),$("description","")):J("title",e[0].id):J("title",void 0)},onSearch:function(e){R(Xa(e))},options:M.length>0?M:[y.groupTitle.title]}),k||I?null:Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},D("title")),{},{defaultValue:y.groupTitle.title.id,type:"hidden",isInvalid:!!Q.title})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(a=Q.title)||void 0===a?void 0:a.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicDescription",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"description"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[k||I?null:Object(Ce.jsx)(Ts.b,{style:{height:"500px"},renderHTML:function(e){return Object(Ce.jsx)(Lt.a,{children:e})},onChange:function(e){e.html,e.text}}),k||I?null:Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({as:"textarea"},D("description")),{},{rows:5,defaultValue:y.description,placeholder:"Enter description",isInvalid:!!Q.description})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(n=Q.description)||void 0===n?void 0:n.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicText",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"review"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[k||I?null:Object(Ce.jsx)(Ts.b,{style:{height:"500px"},renderHTML:function(e){return Object(Ce.jsx)(Lt.a,{children:e})},onChange:function(e){e.html,e.text}}),k||I?null:Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({as:"textarea"},D("text")),{},{rows:10,defaultValue:y.text,placeholder:"Enter text review",isInvalid:!!Q.text})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(c=Q.text)||void 0===c?void 0:c.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicTags",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Tags"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[k||I?null:Object(Ce.jsx)(Xt.a,{ref:g,id:"async-tags",minLength:2,multiple:!0,allowNew:!0,delay:300,useCache:!1,labelKey:"tag",isLoading:q,clearButton:!0,defaultSelected:y.tags,onChange:function(e){e.length>0?e.at(-1).customOption?R(fa(e.at(-1).tag)):v(Object(Xe.a)(e)):v([])},onSearch:function(e){R(pa(e))},options:W.length>0?W.filter((function(e){return!~g.current.state.selected.findIndex((function(t){return t.id==e.id}))})):y.tags}),k||I?null:Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},D("tags")),{},{value:f.map((function(e){return e.id})).join(" "),type:"text",isInvalid:!!Q.title})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(s=Q.tags)||void 0===s?void 0:s.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formAuthorRating",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Author rating"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[k||I?null:Object(Ce.jsxs)(_e.a.Select,Object(w.a)(Object(w.a)(Object(w.a)({},D("authorRating")),y.authorRating?{defaultValue:y.authorRating}:{}),{},{isInvalid:!!Q.authorRating,children:[Object(Ce.jsx)("option",{disabled:!0,selected:!0,children:"Chose ratings"}),Object(Ce.jsx)("option",{value:"1",children:"1"}),Object(Ce.jsx)("option",{value:"2",children:"2"}),Object(Ce.jsx)("option",{value:"3",children:"3"}),Object(Ce.jsx)("option",{value:"4",children:"4"}),Object(Ce.jsx)("option",{value:"5",children:"5"}),Object(Ce.jsx)("option",{value:"6",children:"6"}),Object(Ce.jsx)("option",{value:"7",children:"7"}),Object(Ce.jsx)("option",{value:"8",children:"8"}),Object(Ce.jsx)("option",{value:"9",children:"9"}),Object(Ce.jsx)("option",{value:"10",children:"10"})]})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(u=Q.authorRating)||void 0===u?void 0:u.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formIsDraft",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Is Draft"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[k||I?null:Object(Ce.jsx)(_e.a.Check,{type:"checkbox",defaultChecked:!!y.draft}),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(j=Q.draft)||void 0===j?void 0:j.message})]})]}),Object(Ce.jsx)(Ee.a,{className:"justify-content-center",children:Object(Ce.jsx)(Se.a,{md:"auto",children:Object(Ce.jsx)(O.a,{variant:"outline-primary",type:"submit",children:"Save"})})})]})})}),Object(Ce.jsxs)(vn.a,{show:_,onHide:te,animation:!1,centered:!0,size:"lg",children:[Object(Ce.jsx)(vn.a.Header,{closeButton:!0,children:Object(Ce.jsx)(vn.a.Title,{children:"Modal Create New Title"})}),Object(Ce.jsx)(vn.a.Body,{children:Object(Ce.jsxs)(_e.a,{id:"hook-modal-form",onSubmit:Z((function(e){console.log(e),R(Ya(e)),U(!1)})),children:[Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicTitleTitle",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"Title"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({},Y("title")),{},{type:"text",placeholder:"Enter title",isInvalid:!!ee.title})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(b=ee.title)||void 0===b?void 0:b.message})]})]}),Object(Ce.jsxs)(_e.a.Group,{as:Ee.a,className:"mb-3",controlId:"formBasicTitleDescription",children:[Object(Ce.jsx)(_e.a.Label,{column:!0,sm:"2",children:"description"}),Object(Ce.jsxs)(Se.a,{sm:"10",children:[Object(Ce.jsx)(_e.a.Control,Object(w.a)(Object(w.a)({as:"textarea"},Y("description")),{},{rows:3,placeholder:"Enter description",isInvalid:!!ee.description})),Object(Ce.jsx)(_e.a.Control.Feedback,{type:"invalid",children:null===(m=ee.description)||void 0===m?void 0:m.message})]})]})]})}),Object(Ce.jsxs)(vn.a.Footer,{className:"justify-content-center",children:[Object(Ce.jsx)(O.a,{variant:"outline-secondary",onClick:te,children:"Close"}),Object(Ce.jsx)(O.a,{variant:"outline-success",type:"submit",form:"hook-modal-form",children:"Create Title"})]})]})]})}function Ss(){return Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(ze,{}),Object(Ce.jsx)(Es,{})]})}var Gs=v.a.mark(Us),_s=v.a.mark(Fs);function Us(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.b)(R,Object(w.a)({method:"get",url:"/".concat(a.isUser?"user":"guest","/search/").concat(a.query),params:a.params},N));case 4:return r=n.sent,n.next=7,Object(y.d)(gr(r.data));case 7:n.next=12;break;case 9:throw n.prev=9,n.t0=n.catch(1),n.t0;case 12:case"end":return n.stop()}}),Gs,null,[[1,9]])}function Fs(e){var t,a,r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?{}:t,n.prev=1,n.next=4,Object(y.b)(R,Object(w.a)({method:"get",url:"/".concat(a.isUser?"user":"guest","/search/").concat(a.query),params:a.params},N));case 4:return r=n.sent,n.next=7,Object(y.d)(xr(r.data));case 7:n.next=12;break;case 9:throw n.prev=9,n.t0=n.catch(1),n.t0;case 12:case"end":return n.stop()}}),_s,null,[[1,9]])}var As="FETCH_MORE_SEARCH_REVIEWS",Ms="FETCH_GET_SEARCH_REVIEWS",Hs=k([[As,Us],[Ms,Fs]]),Ps=C({sagaMoreSearchReviews:As,sagaGetSearchReviews:Ms}),Bs=(Ps.sagaMoreSearchReviews,Ps.sagaGetSearchReviews);function Ws(){var e=Object(h.a)(),t=Object(l.a)(e,3),a=t[0],n=(t[2],Object(o.c)((function(e){return e.userReviews.data}))),c=Object(o.b)(),s=Object(u.c)(),d=Object(l.a)(s,1)[0],j=Object(i.g)();return Object(r.useEffect)((function(){c(Bs({params:d,query:j.query,isUser:g(a.Roles)}))}),[j,d]),Object(Ce.jsx)("div",{children:Object(Ce.jsx)(Ee.a,{children:Object(Ce.jsx)(Se.a,{children:n.map((function(e){var t,a,r,n,c,s,i,o;return Object(Ce.jsx)(Dt,{id:e.id,title:null===(t=e.groupTitle)||void 0===t||null===(a=t.title)||void 0===a?void 0:a.title,group:null===(r=e.groupTitle)||void 0===r||null===(n=r.group)||void 0===n?void 0:n.group,ratings:e.ratings||[],likes:e.likes||[],description:e.description,date:e.createdAt,authorRating:e.authorRating,author:[(null===(c=e.user)||void 0===c||null===(s=c.userInfo)||void 0===s?void 0:s.first_name)||"Unknown",(null===(i=e.user)||void 0===i||null===(o=i.userInfo)||void 0===o?void 0:o.last_name)||"Unknown"]},e.id)}))})})})}function qs(){return Object(Ce.jsxs)(d.a,{children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(ze,{}),Object(Ce.jsx)(It,{content:Object(Ce.jsx)(Ws,{}),rightbar:Object(Ce.jsx)(Dr,{})})]})}function Vs(){return Object(Ce.jsx)("div",{children:Object(Ce.jsxs)(i.c,{children:[Object(Ce.jsx)(i.a,{path:"user",element:Object(Ce.jsx)(yt,{})}),Object(Ce.jsx)(i.a,{path:"registration",element:Object(Ce.jsx)(Qe,{})}),Object(Ce.jsx)(i.a,{path:"login",element:Object(Ce.jsx)(De,{})}),Object(Ce.jsx)(i.a,{path:"search/:query",element:Object(Ce.jsx)(qs,{})}),Object(Ce.jsx)(i.a,{path:"reviews",element:Object(Ce.jsx)(Kr,{})}),Object(Ce.jsx)(i.a,{path:"review/:id",element:Object(Ce.jsx)(Pn,{})}),Object(Ce.jsx)(i.a,{path:"my-reviews",element:Object(Ce.jsx)(Hc,{})}),Object(Ce.jsx)(i.a,{path:"my-review-edit/:id",element:Object(Ce.jsx)(Ss,{})}),Object(Ce.jsx)(i.a,{path:"/",element:Object(Ce.jsx)(Kr,{})})]})})}var zs=a(290),Ds=v.a.mark(Ks);function Ks(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[].concat(Object(Xe.a)(Er),Object(Xe.a)(Vr),Object(Xe.a)(we),Object(Xe.a)(ot),Object(Xe.a)(pt),Object(Xe.a)(Cc),Object(Xe.a)(ka),Object(Xe.a)(Ja),Object(Xe.a)(ga),Object(Xe.a)(ps),Object(Xe.a)(ir),Object(Xe.a)(At),Object(Xe.a)(qt),Object(Xe.a)(_n),Object(Xe.a)(Hs)),t.next=3,Object(y.a)(e.map((function(e){return Object(y.e)(v.a.mark((function t(){var a,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!e.pattern){t.next=18;break}a=void 0;case 4:return t.next=7,Object(y.f)(e.pattern);case 7:if(r=t.sent,!a){t.next=11;break}return t.next=11,Object(y.c)(a);case 11:return t.next=13,Object(y.b)(e.saga,r);case 13:a=t.sent,t.next=4;break;case 16:t.next=20;break;case 18:return t.next=20,Object(y.b)(e);case 20:return t.abrupt("break",28);case 23:throw t.prev=23,t.t0=t.catch(1),t.t0;case 26:t.next=0;break;case 28:case"end":return t.stop()}}),t,null,[[1,23]])})))})));case 3:case"end":return t.stop()}}),Ds)}var Js=Object(zs.a)(),Qs=Object(E.a)({reducer:{userReviews:vr,userTags:Pr,userUser:Z,userLikes:se,userLangs:nt,userThemes:Ot,editorReviews:lc,editorGroups:Ra,editorTitles:Ba,editorTags:la,editorImages:ss,guestEditors:rr,customFilter:br,userRatings:Gt,userComments:pn},middleware:[].concat(Object(Xe.a)(Object(E.c)({thunk:!1,serializableCheck:!1})),[Js])});Js.run(Ks);var Xs=Qs,Ys=a(489);s.a.render(Object(Ce.jsx)(n.a.StrictMode,{children:Object(Ce.jsx)(Ys.a,{children:Object(Ce.jsx)(u.a,{children:Object(Ce.jsx)(o.a,{store:Xs,children:Object(Ce.jsx)(Vs,{})})})})}),document.getElementById("root"))}},[[463,1,2]]]);
//# sourceMappingURL=main.b5c8a18e.chunk.js.map